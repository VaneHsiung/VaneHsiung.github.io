<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>vBlog</title>
  
  <subtitle>Vane Hsiung&#39;s Blog</subtitle>
  <link href="https://vanehsiung.netlify.app/atom.xml" rel="self"/>
  
  <link href="https://vanehsiung.netlify.app/"/>
  <updated>2020-12-11T13:13:55.278Z</updated>
  <id>https://vanehsiung.netlify.app/</id>
  
  <author>
    <name>vane</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Hexo</title>
    <link href="https://vanehsiung.netlify.app/2020/12/10/Hexo/"/>
    <id>https://vanehsiung.netlify.app/2020/12/10/Hexo/</id>
    <published>2020-12-10T14:50:12.000Z</published>
    <updated>2020-12-11T13:13:55.278Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h3 id="Hexo"><a href="#Hexo" class="headerlink" title="Hexo"></a><span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlvL3poLWNuL2RvY3MvaW5kZXguaHRtbA==">Hexo<i class="fa fa-external-link-alt"></i></span></h3><p>Hexo 是一个快速、简洁且高效的博客框架。</p><a id="more"></a><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><ul><li><p>安装 Git：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install git</span><br></pre></td></tr></table></figure></li><li><p>安装 node.js：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scoop install nodejs</span><br></pre></td></tr></table></figure></li><li><p>安装 Hexo：-g 表示全局安装，会将 Hexo 命令加入环境变量中。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></li></ul><h5 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init [folder]</span><br><span class="line">cd &lt;folder&gt;</span><br><span class="line">npm install # 不必执行，在执行 hexo init 的过程中就已经自动安装好了项目依赖。</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── node_modules&#x2F;&#x2F;依赖安装目录</span><br><span class="line">├── scaffolds&#x2F;&#x2F;模板文件夹，Hexo的模板是指在新建的文章文件中默认填充的内容。</span><br><span class="line">|   ├── draft.md&#x2F;&#x2F;草稿模板</span><br><span class="line">|   ├── page.md&#x2F;&#x2F;页面模板</span><br><span class="line">|   └── post.md&#x2F;&#x2F;文章模板</span><br><span class="line">├── source&#x2F;&#x2F;资源文件夹</span><br><span class="line">|   └── _posts&#x2F;&#x2F;文章目录</span><br><span class="line">├── themes&#x2F;&#x2F;主题文件夹，Hexo 会根据主题来生成静态页面。</span><br><span class="line">|   └── landscape&#x2F;&#x2F;默认主题</span><br><span class="line">├── .gitignore&#x2F;&#x2F;指定不纳入git版本控制的文件</span><br><span class="line">├── _config.yml&#x2F;&#x2F;站点配置文件</span><br><span class="line">├── db.json            </span><br><span class="line">├── package.json&#x2F;&#x2F;应用程序的信息</span><br><span class="line">└── package-lock.json</span><br></pre></td></tr></table></figure><p>source：资源文件夹是存放用户资源的地方。除 _posts 文件夹之外，开头命名为 _ (下划线)的文件 / 文件夹和隐藏的文件将会被忽略。</p><h5 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h5><p>您可以在 <code>_config.yml</code> 中修改大部分的配置。</p><table><thead><tr><th align="left">参数</th><th align="left">描述</th></tr></thead><tbody><tr><td align="left"><code>title</code></td><td align="left">网站标题</td></tr><tr><td align="left"><code>subtitle</code></td><td align="left">网站副标题</td></tr><tr><td align="left"><code>description</code></td><td align="left">网站描述</td></tr><tr><td align="left"><code>keywords</code></td><td align="left">网站的关键词。支援多个关键词。</td></tr><tr><td align="left"><code>author</code></td><td align="left">您的名字</td></tr><tr><td align="left"><code>language</code></td><td align="left">网站使用的语言。</td></tr><tr><td align="left"><code>timezone</code></td><td align="left">网站时区。Hexo 默认使用您电脑的时区。如 <code>Asia/Shanghai</code>。</td></tr><tr><td align="left"><code>url</code></td><td align="left">网址 http://<code>or</code>https://</td></tr><tr><td align="left"><code>root</code></td><td align="left">网站根目录</td></tr><tr><td align="left"><code>theme</code></td><td align="left">当前主题名称。值为<code>false</code>时禁用主题</td></tr><tr><td align="left"><code>deploy</code></td><td align="left">部署部分的设置</td></tr></tbody></table><h5 id="指令"><a href="#指令" class="headerlink" title="指令"></a>指令</h5><ul><li><p>version 显示 Hexo 版本：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo version</span><br></pre></td></tr></table></figure></li><li><p>list 列出网站资料：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo list</span><br></pre></td></tr></table></figure></li><li><p>新建一篇文章：如果没有设置 layout 的话，默认使用 _config.yml 中的 default_layout 参数代替。如果标题包含空格的话，请使用引号括起来。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo new [layout] &lt;title&gt;</span><br><span class="line">hexo n [layout] &lt;title&gt;</span><br></pre></td></tr></table></figure></li><li><p>Hexo 有三种默认布局：</p><table><thead><tr><th>布局</th><th>路径</th></tr></thead><tbody><tr><td>post</td><td>source/_posts</td></tr><tr><td>page</td><td>source</td></tr><tr><td>draft</td><td>source/_drafts</td></tr></tbody></table></li><li><p>预览草稿，publish 发表草稿：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo server --draft</span><br><span class="line">hexo publish [layout] &lt;filename&gt;</span><br></pre></td></tr></table></figure></li><li><p>clean 清除缓存文件 (db.json) 和已生成的静态文件 (public)：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br></pre></td></tr></table></figure></li><li><p>generate 生成静态文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo generate</span><br><span class="line">hexo g</span><br></pre></td></tr></table></figure></li><li><p>启动 hexo 的内置 Web 服务器：该命令将会调用 <span class="exturl" data-url="aHR0cHM6Ly93d3cubWFya2Rvd25ndWlkZS5vcmcvYmFzaWMtc3ludGF4">Markdown<i class="fa fa-external-link-alt"></i></span> 引擎解析项目中的博客内容生成网页资源，资源将会存于内存中。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo server</span><br><span class="line">hexo s --debug# 开启调试模式（--debug）</span><br><span class="line">hexo s --port 8000# 添加 -p &#x2F; --port 参数来设置 Web 服务监听的端口号</span><br><span class="line">hexo s --static# 加 -s &#x2F; --static 参数，本地改动不触发 hexo 实时解析更新。</span><br></pre></td></tr></table></figure></li><li><p>deploy 部署网站：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo deploy</span><br><span class="line">hexo d</span><br></pre></td></tr></table></figure></li></ul><h5 id="写作"><a href="#写作" class="headerlink" title="写作"></a>写作</h5><ul><li><p>Front-matter： 是文件最上方以 <code>---</code> 分隔的区域，用于指定个别文件的变量</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">layout:</span> <span class="comment"># 布局</span></span><br><span class="line"><span class="attr">title:</span> <span class="comment"># 标题</span></span><br><span class="line"><span class="attr">date:</span> <span class="comment"># 建立日期</span></span><br><span class="line"><span class="attr">updated:</span> <span class="comment"># 更新日期</span></span><br><span class="line"><span class="attr">comments:</span> <span class="comment"># 开启文章的评论功能</span></span><br><span class="line"><span class="attr">tags:</span><span class="comment"># 标签</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">标签1</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">标签2</span></span><br><span class="line"><span class="attr">categories:</span> [<span class="string">分类1</span>, <span class="string">分类2</span>]<span class="comment"># 分类, 不适用与分页</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="comment"># 覆盖文章网址</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>  标签是一种列表结构，而分类是一种树结构。</p></li><li><p>文本居中标签：在引用单行文本时使用</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;blockquote class&#x3D;&quot;blockquote-center&quot;&gt;blah blah blah&lt;&#x2F;blockquote&gt;# HTML方式</span><br><span class="line"></span><br><span class="line">&#123;% centerquote %&#125;blah blah blah&#123;% endcenterquote %&#125;# 标签方式</span><br><span class="line"></span><br><span class="line">&#123;% cq %&#125; blah blah blah &#123;% endcq %&#125;# 标签别名</span><br></pre></td></tr></table></figure></li><li><p>引用块</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% blockquote [author[, source]] [link] [source_link_title] %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endblockquote %&#125;</span><br></pre></td></tr></table></figure></li><li><p>代码块</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">​&#96;&#96;&#96; [language] [title] [url] [link text]</span><br><span class="line">code snippet</span><br><span class="line">​&#96;&#96;&#96;</span><br></pre></td></tr></table></figure><ul><li><code>langugae</code>：语言名称，引导渲染引擎正确解析并高亮显示关键字</li><li><code>title</code>：代码块标题，将会显示在左上角</li><li><code>url</code>：链接地址，如果没有指定 link text 则会在右上角显示 link</li><li><code>link text</code>：链接名称，指定 url 后有效，将会显示在右上角</li><li>如果设置语言为 diff，可以在代码前添加 <code>+</code> 和 <code>-</code> 来使用如上所示的高亮增删行提示效果，在展示代码改动痕迹时比较实用。</li></ul></li><li><p>note 标签：通过 note 标签可以为段落添加背景色</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% note [class] %&#125;</span><br><span class="line">文本内容 (支持行内标签)</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure><ul><li>支持的 class 种类包括 default、primary、success、info、warning、danger</li></ul></li><li><p>label 标签：通过 label 标签可以为文字添加背景色</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% label [class]@text  %&#125;</span><br></pre></td></tr></table></figure><ul><li>支持的 class 种类包括 default、primary、success、info、warning、danger</li></ul></li><li><p>button 按钮：通过 button 标签可以快速添加带有主题样式的按钮</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% button &#x2F;path&#x2F;to&#x2F;url&#x2F;, text, icon [class], title %&#125;</span><br><span class="line">&#123;% btn &#x2F;path&#x2F;to&#x2F;url&#x2F;, text, icon [class], title %&#125;</span><br></pre></td></tr></table></figure></li><li><p>tab 标签：tab 标签用于快速创建 tab 选项卡</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% tabs [Unique name], [index] %&#125;</span><br><span class="line">  &lt;!-- tab [Tab caption]@[icon] --&gt;</span><br><span class="line">  标签页内容（支持行内标签）</span><br><span class="line">  &lt;!-- endtab --&gt;</span><br><span class="line">&#123;% endtabs %&#125;</span><br></pre></td></tr></table></figure><ul><li>Unique name: 全局唯一的 Tab 名称，将作为各个标签页的 id 属性前缀</li><li>index: 当前激活的标签页索引，如果未定义则默认选中显示第一个标签页，如果设为 - 1 则默认隐藏所有标签页</li><li>Tab caption: 当前标签页的标题，如果不指定则会以 Unique name 加上索引作为标题</li><li>icon: 在标签页标题中添加 Font awesome 图标</li></ul></li><li><p>引用站内链接</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% post_path slug %&#125;</span><br><span class="line">&#123;% post_link slug [title] %&#125;</span><br></pre></td></tr></table></figure><ul><li><code>slug</code> 表示 <code>_post</code> 目录下的 Markdown 文件名。</li><li>post_path 标签将会渲染为文章的地址，即 permalink；而 post_link 标签将会渲染为链接，可以通过 title 指定链接标题。</li></ul></li><li><p>插入 Swig 代码：通过 raw 标签来禁止 Markdown 引擎渲染标签内的内容。该标签通常用于在页面内引入三方脚本实现特殊功能。</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">content</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure></li><li><p>插入 Gist</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% gist gist_id [filename] %&#125;</span><br></pre></td></tr></table></figure><ul><li>gist_id: Gist 仓库页面 url 中最后一段随机字符串</li><li>filename: Gist 中的文件名，如果 Gist 中只有一个文件，可以不用指定 filename，如果 Gist 中有多个文件，可以在标签内输入 filename 来指定只引入某个文件，如果没有指定 filename，将会引入 Gist 中的所有文件。</li></ul></li><li><p>插入图片：</p><ul><li><p>Markdown 并不会保存插入的图片资源本身，只是记录了获取资源的链接。</p></li><li><p>相对路径引用的标签插件</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% asset_img slug [title] %&#125;</span><br></pre></td></tr></table></figure><ul><li><p>slug 是资源文件夹下的图片名</p></li><li><p>Embedding an image using markdown：allows you to embed an image in markdown without using asset_img tag plugin.</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">marked:</span></span><br><span class="line">  <span class="attr">prependRoot:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">postAsset:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>  <code>![](image.jpg)</code> will be rendered as <code>&lt;img src=&quot;/2020/01/02/foo/image.jpg&quot;&gt;</code>.</p></li></ul></li></ul></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0QwbjlYMW4vaGV4by1ibG9nLWVuY3J5cHQ=">文章加密<i class="fa fa-external-link-alt"></i></span></p><ul><li><p>Install</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-blog-encrypt</span><br></pre></td></tr></table></figure></li><li><p>Quick start: Add the “password” value to your post’s front matter like</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">password: mikemessi</span><br><span class="line">---</span><br></pre></td></tr></table></figure></li></ul></li></ul><ul><li><p><span class="exturl" data-url="aHR0cHM6Ly9zdXlpbi1ibG9nLmNsdWIvMjAxOS8zS1pNQkFGLw==">Hexo 添加文章时自动打开编辑器<i class="fa fa-external-link-alt"></i></span></p><ul><li><p>在 Hexo 目录下的 scripts 目录中创建一个 JavaScript 脚本文件。通过这个脚本，我们用其来监听 <code>hexo new</code> 这个动作，并在检测到 <code>hexo new</code> 之后，执行编辑器打开的命令。</p></li><li><p>将下列内容写入你的脚本</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var spawn &#x3D; require(&#39;child_process&#39;).exec;</span><br><span class="line"></span><br><span class="line">hexo.on(&#39;new&#39;, function(data)&#123;</span><br><span class="line">  spawn(&#39;start  &quot;markdown编辑器绝对路径.exe&quot; &#39; + data.path);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li></ul></li><li><p>文章置顶</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">sticky: true</span><br><span class="line">---</span><br></pre></td></tr></table></figure></li></ul><h5 id="资源文件夹"><a href="#资源文件夹" class="headerlink" title="资源文件夹"></a>资源文件夹</h5><p>资源（Asset）代表 source 文件夹中除了文章以外的所有文件。</p><p><strong>文章资源文件夹</strong></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>当资源文件管理功能打开后，Hexo将会在你每一次通过 <code>hexo new [layout] &lt;title&gt;</code> 命令创建新文章时自动创建一个文件夹。这个资源文件夹将会有与这个文章文件一样的名字。将所有与你的文章有关的资源放在这个关联文件夹中之后，你可以通过相对路径来引用它们。</p><h5 id="部署"><a href="#部署" class="headerlink" title="部署"></a>部署</h5><p><strong>持续集成（Continuous Integration，简称 CI）</strong></p><p>Simply Push to Deploy：热部署，只需要将代码 push 到 Git 远程仓库即可自动构建及更新。</p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cubmV0bGlmeS5jb20v">Netlify<i class="fa fa-external-link-alt"></i></span></p><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21hcmtldHBsYWNlL2FjdGlvbnMvaGV4by1hY3Rpb24=">GitHub Action<i class="fa fa-external-link-alt"></i></span>：</p><ul><li><p>Add your ssh key pair</p><ul><li><p>Run the following terminal command, replacing the email with one connected to your GitHub account.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;username@example.com&quot;</span><br></pre></td></tr></table></figure><p>Windows 下自定义 ssh key 文件需写成 <code>GIT\BlogSrc/.ssh/id_rsa</code></p></li><li><p>In Github Pages repo: Add the contents of the <strong>public key（id_rsa.pub）</strong> within your repositories deploy keys menu. You can find this option by going to <code>Settings &gt; Deploy Keys</code>, you can name the public key whatever you want, but you do <strong>need to give it write access</strong>.</p></li><li><p>In hexo source code repo: Add the contents of the <strong>private key（id_rsa）</strong> to the <code>Settings &gt; Secrets</code> menu as <code>DEPLOY_KEY</code>.</p></li></ul></li><li><p>Configure github workflows：Create a workflow .yml file in your .github/workflows directory.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span> [<span class="string">push</span>]</span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">A</span> <span class="string">job</span> <span class="string">to</span> <span class="string">deploy</span> <span class="string">blog.</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/checkout@v1</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">submodules:</span> <span class="literal">true</span> <span class="comment"># Checkout private submodules(themes or something else).</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Caching dependencies to speed up workflows. (GitHub will remove any cache entries that have not been accessed in over 7 days.)</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Cache</span> <span class="string">node</span> <span class="string">modules</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">actions/cache@v1</span></span><br><span class="line">      <span class="attr">id:</span> <span class="string">cache</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">path:</span> <span class="string">node_modules</span></span><br><span class="line">        <span class="attr">key:</span> <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-node-$&#123;&#123;</span> <span class="string">hashFiles(&#x27;**/package-lock.json&#x27;)</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">restore-keys:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">$&#123;&#123;</span> <span class="string">runner.os</span> <span class="string">&#125;&#125;-node-</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Install</span> <span class="string">Dependencies</span></span><br><span class="line">      <span class="attr">if:</span> <span class="string">steps.cache.outputs.cache-hit</span> <span class="type">!=</span> <span class="string">&#x27;true&#x27;</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">npm</span> <span class="string">ci</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Deploy hexo blog website.</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span></span><br><span class="line">      <span class="attr">id:</span> <span class="string">deploy</span></span><br><span class="line">      <span class="attr">uses:</span> <span class="string">sma11black/hexo-action@v1.0.3</span></span><br><span class="line">      <span class="attr">with:</span></span><br><span class="line">        <span class="attr">deploy_key:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.DEPLOY_KEY</span> <span class="string">&#125;&#125;</span></span><br><span class="line">        <span class="attr">user_name:</span> <span class="string">your</span> <span class="string">github</span> <span class="string">username</span>  <span class="comment"># (or delete this input setting to use bot account)</span></span><br><span class="line">        <span class="attr">user_email:</span> <span class="string">your</span> <span class="string">github</span> <span class="string">useremail</span>  <span class="comment"># (or delete this input setting to use bot account)</span></span><br><span class="line">        <span class="attr">commit_msg:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.event.head_commit.message</span> <span class="string">&#125;&#125;</span>  <span class="comment"># (or delete this input setting to use hexo default settings)</span></span><br><span class="line">    <span class="comment"># Use the output from the `deploy` step(use for test action)</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Get</span> <span class="string">the</span> <span class="string">output</span></span><br><span class="line">      <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">        <span class="string">echo</span> <span class="string">&quot;$<span class="template-variable">&#123;&#123; steps.deploy.outputs.notify &#125;&#125;</span>&quot;</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>一键部署</strong></p><ul><li><p>新建一个空的 repository（没有init任何内容）。你的 repository 必须直接命名为 <code>&lt;你的 GitHub 用户名.github.io&gt;</code>。从而能通过 <code>&lt;你的 GitHub 用户名.github.io&gt;</code> 域名直接访问你的blog。</p></li><li><p>安装 hexo-deployer-git。</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure></li><li><p>修改<code>_config.yml</code>配置。</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:yourname/yourname.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure></li><li><p>生成站点文件并推送至远程库。执行 <code>hexo clean</code> &amp;  <code>hexo deploy</code>。</p></li><li><p>登入 Github，在库设置（Repository Settings）中将默认分支设置为<code>_config.yml</code>配置中的分支名称。稍等片刻（Blog 不会立马加载出来，需多刷新几下），您的站点就会显示在您的Github Pages中。</p></li><li><p>这是如何发生的：当执行 <code>hexo deploy</code> 时，Hexo 会将 <code>public</code> 目录中的文件和目录推送至 <code>_config.yml</code> 中指定的远端仓库和分支中，并且<strong>完全覆盖</strong>该分支下的已有内容。</p></li><li><p>部署分支与写作分支：<code>hexo d</code> 部署到 GitHub 的是 hexo 编译后的文件，不包含源文件。可以利用git的分支管理，将源文件上传到 GitHub。一个好的实践是放在两个不同的 Git 仓库中。</p></li></ul><h5 id="主题"><a href="#主题" class="headerlink" title="主题"></a>主题</h5><p>创建 Hexo 主题非常容易，您只要在 <code>themes</code> 文件夹内，新增一个任意名称的文件夹，并修改 <code>_config.yml</code> 内的 <code>theme</code> 设定，即可切换主题。</p><ul><li><code>_config.yml</code>：主题的配置文件。和 Hexo 配置文件不同，主题配置文件修改时会自动更新，无需重启 Hexo Server。</li><li><code>languages</code>：语言文件夹。</li><li><code>layout</code>：布局文件夹。</li><li><code>scripts</code>：脚本文件夹。</li><li><code>source</code>：资源文件夹。</li></ul><p>在 GitHub 搜索 Hexo 即可找到流行的 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlvL3RoZW1lcy8=">Hexo 主题<i class="fa fa-external-link-alt"></i></span>。各主题都有相应的使用文档。</p><h3 id="NexT"><a href="#NexT" class="headerlink" title="NexT"></a><span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9kb2NzLw==">NexT<i class="fa fa-external-link-alt"></i></span></h3><h5 id="Getting-Started"><a href="#Getting-Started" class="headerlink" title="Getting Started"></a>Getting Started</h5><p><strong>Installation</strong></p><ul><li><p>Installation</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd hexo-site</span><br><span class="line">npm install hexo-theme-next</span><br></pre></td></tr></table></figure></li><li><p>Usage, theme config file</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br></pre></td></tr></table></figure></li><li><p>Update</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd hexo-site</span><br><span class="line">npm update hexo-theme-next</span><br></pre></td></tr></table></figure></li></ul><p><strong>Configuration</strong></p><p>Installed through npm</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp node_modules/hexo-theme-next/_config.yml _config.next.yml</span><br></pre></td></tr></table></figure><h5 id="Theme-Settings"><a href="#Theme-Settings" class="headerlink" title="Theme Settings"></a>Theme Settings</h5><p><em>Choosing Scheme</em>: </p><p>By using Scheme NexT gives you different views. And nearly all config can be used by those Schemes. </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># next/_config.yml</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Muse</span></span><br></pre></td></tr></table></figure><p><em>Configuring Favicon</em>: </p><p>By default the Hexo site use NexT favicons in <code>hexo-site/themes/next/source/images/</code> directory with different size for different device. </p><p>You can replace them with your own favicons.</p><p>For example, you can put your favicons in <code>hexo-site/source/images/</code> directory. Then you need to rename them and change the settings in favicon section in theme config file.</p><p><em>Creative Commons</em>:</p><p>NexT supports the display of <em>Creative Commons 4.0 International License</em> in sidebar and post.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># next/_config.yml</span></span><br><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">language:</span> <span class="string">en</span></span><br></pre></td></tr></table></figure><p>通行的版权协议是一种限制性的协议，就是说，只有它明文许可你可以做的事，你才能做，否则就是侵权行为。</p><p>而”开放内容许可证”（open content licenses）只明文禁止使用者不能做的事，除此以外，可以随意使用这些作品。创作共用许可证（Creative Commons licenses，简称cc），就是这样一种许可证。</p><p>使用创作共用许可证，作者可以选择保留四种权利：</p><ol><li>署名（Attribution，简写为by）：必须提到原作者。</li><li>非商业用途（Noncommercial，简写为nc）：不得用于盈利性目的。</li><li>禁止演绎（No Derivative Works，简写为nd）：不得修改原作品。</li><li>相同方式共享（Share Alike，简写为sa）：如果允许修改原作品，那么必须使用相同的许可证发布。</li></ol><p><em>Configuring Menu Items</em>:</p><p>Menu settings items have format <code>Key: /link/ || icon</code> which contains 3 values:</p><ul><li>Key → is the name of menu item (home, archives, etc.).</li><li>/link/ → is the target link to relative url inside your site.</li><li>icon → is the name of <span class="exturl" data-url="aHR0cHM6Ly9mb250YXdlc29tZS5jb20v">Font Awesome icon<i class="fa fa-external-link-alt"></i></span>.</li></ul><p>To customize menu items, edit the following content in theme config file:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br></pre></td></tr></table></figure><p><span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9kb2NzL3RoZW1lLXNldHRpbmdzL2N1c3RvbS1wYWdlcy5odG1s">Google Calendar Page<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">schedule:</span> <span class="string">/schedule/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-calendar</span></span><br></pre></td></tr></table></figure><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2hleG9qcy9oZXhvLWdlbmVyYXRvci1zaXRlbWFw">sitemap<i class="fa fa-external-link-alt"></i></span>：为了让博文被google或百度检索，需要使用hexo的sitemap功能。 </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sitemap:</span> <span class="string">/sitemap.xml</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-sitemap</span></span><br></pre></td></tr></table></figure><ul><li><p>Install</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-sitemap --save</span><br></pre></td></tr></table></figure></li><li><p>Hexo Config</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">sitemap:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">sitemap.xml</span></span><br></pre></td></tr></table></figure></li></ul><p>Except home and archives, all custom pages under menu section need to be created manually!</p><p><strong>Sidebar Setting</strong></p><p><em>Configuring Avatar</em>：</p><p>Put your avatar under site directory <code>source/uploads/</code> (create directory if it doesn’t exists).And then change option to <code>url: /uploads/avatar.png</code>.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/uploads/avatar.png</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>点击头像回到首页：</p><p>主要是将<code>&lt;img class=&quot;site-author-image&quot; ... /&gt;</code>加入到<code>&lt;a href=&quot;/&quot;&gt;&lt;/a&gt;</code>。</p><p><em>Sidebar Social Links</em>：</p><ul><li><p>Edit the <code>social</code> section in theme config file as following:</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/yourname</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">mailto:yourname@example.com</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-envelope</span></span><br></pre></td></tr></table></figure></li><li><p>取消社交图标前的小圆点：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># create hexo-site&#x2F;source&#x2F;_data&#x2F;styles.styl</span><br><span class="line">.links-of-author a,</span><br><span class="line">.links-of-author .exturl &#123;</span><br><span class="line">  &amp;:before &#123;</span><br><span class="line">    display: none;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p><em>Sidebar Blogrolls</em> (友链):</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">links:</span></span><br><span class="line">  <span class="attr">Title1:</span> <span class="string">https://example.com/</span></span><br></pre></td></tr></table></figure><p><em>Sidebar TOC</em>:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">toc:</span></span><br><span class="line">  <span class="attr">number:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">expand_all:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">max_depth:</span> <span class="number">5</span></span><br></pre></td></tr></table></figure><p><strong>Footer</strong></p><p><em>Site Footer Icon</em>:</p><p>By default NexT shows red heart icon between year and copyright information in the footer. </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">icon:</span></span><br><span class="line">    <span class="attr">animated:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><em>Site Copyright Name</em>:</p><p>By default NexT shows the name of author from site config file. </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">copyright:</span> <span class="string">YourName</span></span><br></pre></td></tr></table></figure><p><em>Site Platform Information</em>:</p><p>By default NexT shows Hexo and Theme &amp; scheme information.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">powered:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><em>Site Beian Information</em>:</p><p>Beian information is for Chinese users.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="attr">beian:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">icp:</span> <span class="string">京ICP备</span> <span class="number">1234567890</span><span class="string">号-1</span></span><br><span class="line">    <span class="attr">gongan_id:</span> <span class="number">1234567890</span></span><br><span class="line">    <span class="attr">gongan_num:</span> <span class="string">京公网安备</span> <span class="number">1234567890</span><span class="string">号</span></span><br><span class="line">    <span class="attr">gongan_icon_url:</span> <span class="string">/uploads/beian.png</span></span><br></pre></td></tr></table></figure><p><strong>Post Settings</strong></p><p><em>Preamble Text</em>:</p><p>You can use following ways to show summary of articles and a Read More button.</p><p>Use <code>&lt;!-- more --&gt;</code> in your article to break your article manually, which is recommended by Hexo. (recommended)</p><p>If you have added <code>description</code> and set its value to your article summary in front-matter, NexT excerpts <code>description</code> as preamble text in homepage by default. Without <code>description</code>, the full contents would be the preamble text in homepage.</p><p><em>Post Wordcount</em>:</p><ul><li><p>Installation</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd hexo-site</span><br><span class="line">npm install hexo-word-counter</span><br><span class="line">hexo clean</span><br></pre></td></tr></table></figure></li><li><p>Hexo Config</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">symbols_count_time:</span></span><br><span class="line">  <span class="attr">total_symbols:</span> <span class="literal">false</span><span class="comment"># By default NexT shows the number of all posts words in footer section.</span></span><br><span class="line">  <span class="attr">total_time:</span> <span class="literal">false</span><span class="comment"># By default NexT shows the estimated reading time of all posts in footer section. </span></span><br></pre></td></tr></table></figure></li></ul><p><em>Donate Settings</em>:</p><ul><li><p>Get your WeChat / Alipay receive money QRcode image(s) and put into <code>source/images</code> .</p></li><li><p>Set needed values in <code>theme config file</code>:</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">reward_settings:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">animation:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">comment:</span> <span class="string">Buy</span> <span class="string">me</span> <span class="string">a</span> <span class="string">coffee</span></span><br><span class="line"></span><br><span class="line"><span class="attr">reward:</span></span><br><span class="line">  <span class="attr">wechatpay:</span> <span class="string">/images/wechatpay.png</span></span><br><span class="line">  <span class="attr">alipay:</span> <span class="string">/images/alipay.png</span></span><br></pre></td></tr></table></figure></li></ul><p><em>Follow Me</em>:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">follow_me:</span></span><br><span class="line">  <span class="attr">WeChat:</span> <span class="string">/images/wechat_channel.jpg</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-weixin</span></span><br><span class="line">  <span class="attr">RSS:</span> <span class="string">/atom.xml</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-rss</span></span><br></pre></td></tr></table></figure><ul><li>安装RSS插件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i hexo-generator-feed</span><br></pre></td></tr></table></figure><ul><li>配置站点配置文件(/_config.yml)的Extensions</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">plugin:</span></span><br><span class="line"><span class="bullet">-</span> <span class="string">hexo-generator-feed</span></span><br><span class="line"><span class="comment"># Feed Atom</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">20</span></span><br></pre></td></tr></table></figure><ul><li>编辑主题配置文件(/theme/next/_config.yml)的<code>social links</code>，开启RSS的页面功能</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">rss:</span> <span class="string">/atom.xml</span></span><br></pre></td></tr></table></figure><ul><li>关注RSS：把 <code>https://vanehsiung.github.io/atom.xml</code> 复制到RSS阅读器上，就能关注了。</li></ul><p><strong>Custom Pages</strong></p><p><em>Custom Page Support</em>:</p><ul><li><p>Adding New Page</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd hexo-site</span><br><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure></li><li><p>Setting Front-matter Values</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    ---</span><br><span class="line">    title: Tags</span><br><span class="line">    date: title: 2020-11-14 22:50:2</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">    ---</span><br></pre></td></tr></table></figure></li><li><p>Editting Menu</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br></pre></td></tr></table></figure></li></ul><p><em>Custom 404 Page</em>:</p><ul><li><p>Create a new page called 404</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cd hexo-site</span><br><span class="line">hexo new page 404</span><br><span class="line">---</span><br><span class="line">title: 404</span><br><span class="line">permalink: &#x2F;404.html# 在 Github Docs 中 Github Pages 章有写</span><br><span class="line">comments: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure></li><li><p>Make sure relative_link is disabled in site config file</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">relative_link:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></li><li><p>Whether users can be redirected to the 404 page depends on the settings of the website hosting service or web server, not Hexo. </p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmdpdGh1Yi5jb20vY24vZnJlZS1wcm8tdGVhbUBsYXRlc3QvZ2l0aHViL3dvcmtpbmctd2l0aC1naXRodWItcGFnZXMvY3JlYXRpbmctYS1jdXN0b20tNDA0LXBhZ2UtZm9yLXlvdXItZ2l0aHViLXBhZ2VzLXNpdGU=">为 GitHub Pages 站点创建自定义 404 页面<i class="fa fa-external-link-alt"></i></span></p></li></ul><p><strong>Misc Theme Settings</strong></p><p><em>Mobile Devices Adaptation</em>:</p><p>reduce padding/margin indents on devices with narrow width</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mobile_layout_economy:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><em>Codeblock Style</em>:</p><p>NexT uses the <span class="exturl" data-url="aHR0cHM6Ly9oaWdobGlnaHRqcy5vcmcv">Highlight.js<i class="fa fa-external-link-alt"></i></span> and <span class="exturl" data-url="aHR0cHM6Ly9wcmlzbWpzLmNvbS8=">Prism<i class="fa fa-external-link-alt"></i></span> package to support code highlight</p><ul><li><p>Read Hexo’s documentation on <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlvL2RvY3Mvc3ludGF4LWhpZ2hsaWdodA==">Syntax Highlighting<i class="fa fa-external-link-alt"></i></span> first, and set it up in site config file（在 <code>_config.yml</code> 中开启 Highlight 或 Prism）</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>Preview all available Code Highlight themes here: <span class="exturl" data-url="aHR0cHM6Ly90aGVtZS1uZXh0LmpzLm9yZy9oaWdobGlnaHQv">NexT Highlight Theme Preview<i class="fa fa-external-link-alt"></i></span></p></li><li><p>Change the value of theme and prism to choose the highlight style you like</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">theme:</span></span><br><span class="line">  <span class="attr">light:</span> <span class="string">xcode</span></span><br></pre></td></tr></table></figure></li></ul><p>NexT supports the copy-and-paste functionality of codeblock</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">codeblock:</span></span><br><span class="line">  <span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">style:</span> <span class="string">mac</span><span class="comment"># Mac Panel风格代码块</span></span><br></pre></td></tr></table></figure><p><em>Back To Top</em>:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">back2top:</span></span><br><span class="line">  <span class="attr">scrollpercent:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><em>Fonts Customization</em>：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">font:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">host:</span> <span class="string">https://fonts.loli.net</span></span><br><span class="line">  </span><br><span class="line">  <span class="attr">global:</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Architects</span> <span class="string">Daughter,</span> <span class="string">Ma</span> <span class="string">Shan</span> <span class="string">Zheng</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">codes:</span></span><br><span class="line">    <span class="attr">family:</span> <span class="string">Share</span> <span class="string">Tech</span> <span class="string">Mono</span></span><br></pre></td></tr></table></figure><ul><li><p>host：查看字体与使用字体的网址是不一样的；可能不能查看字体，但可以使用字体</p><ul><li><p>查看 <span class="exturl" data-url="aHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9mb250cw==">Google Fonts<i class="fa fa-external-link-alt"></i></span>，使用 Google Fonts <code>https://fonts.googleapis.com</code>，以下为镜像</p><ul><li><p><code>https://fonts.loli.net</code></p></li><li><p><code>https://fonts.googleapis.cnpmjs.org</code></p></li><li><p><code>https://fonts.proxy.ustclug.org</code></p></li></ul></li></ul></li><li><p>查看<span class="exturl" data-url="aHR0cDovL3d3dy5nb29nbGVmb250cy5jbi9lbmdsaXNo">谷歌字体中文版<i class="fa fa-external-link-alt"></i></span>，使用 <code>https://fonts.font.im</code></p></li><li><p>技巧：先放 latin 文字，再放 chinese 文字，就可以分别定制英文与中文（有些中文字体包含英文字母）。手机无法显示自定义的中文字体，但可以显示自定义的英文字体。</p></li></ul><p><strong>SEO</strong></p><p><em>SEO Setting</em>:</p><p>Next provides useful options for better Search Engine Optimization (SEO).</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># theme config file</span></span><br><span class="line"><span class="attr">disable_baidu_transformation:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">index_with_subtitle:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">exturl:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><em>Webmaster Tools</em>:</p><ul><li><p>Google Webmaster Tools</p><ul><li><p>Login to <span class="exturl" data-url="aHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS93ZWJtYXN0ZXJzL3Rvb2xz">Google Webmaster Tools<i class="fa fa-external-link-alt"></i></span> and go to verification methods and choose <code>HTML Tag</code>, you will get some code:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name&#x3D;&quot;google-site-verification&quot; content&#x3D;&quot;XXXXXXXXXXXXXXXXXXXXXXX&quot;&gt;</span><br></pre></td></tr></table></figure></li><li><p>Copy <code>XXXXXXXXXXXXXXXXXXXXXXX</code> value of <code>content</code> key.Edit theme config file and add or change <code>google_site_verification</code> section:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">google_site_verification:</span> <span class="string">XXXXXXXXXXXXXXXXXXXXXXX</span></span><br></pre></td></tr></table></figure></li><li><p>submit sitemap</p></li><li><p>That the new console says ‘couldnt fetch’ is a bug in the console. Pending is the real status!</p></li></ul></li></ul><ul><li><p>Bing Webmaster Tools</p><ul><li><p>Login to <span class="exturl" data-url="aHR0cHM6Ly93d3cuYmluZy5jb20vd2VibWFzdGVyLw==">Bing Webmaster Tools<i class="fa fa-external-link-alt"></i></span> and go to verification methods and choose <code>HTML Tag</code>, you will get some code:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name&#x3D;&quot;msvalidate.01&quot; content&#x3D;&quot;XXXXXXXXXXXXXXXXXXXXXXX&quot;&gt;</span><br></pre></td></tr></table></figure></li><li><p>Copy <code>XXXXXXXXXXXXXXXXXXXXXXX</code> value of <code>content</code> key. Edit theme config file and add or change <code>bing_site_verification</code> section:</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">bing_site_verification:</span> <span class="string">XXXXXXXXXXXXXXXXXXXXXXX</span></span><br></pre></td></tr></table></figure></li><li><p>submit sitemap</p></li><li><p>Bing 收录最快，立马就可以看到</p></li></ul></li><li><p>Baidu Webmaster Tools</p><ul><li><p>Login to <span class="exturl" data-url="aHR0cHM6Ly96aXl1YW4uYmFpZHUuY29tL3NpdGUvIy8=">Baidu Webmaster Tools<i class="fa fa-external-link-alt"></i></span> and go to verification methods and choose <code>HTML Tag</code>, you will get some code:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name&#x3D;&quot;baidu-site-verification&quot; content&#x3D;&quot;XXXXXXXXXXXXXXXXXXXXXXX&quot;&gt;</span><br></pre></td></tr></table></figure></li><li><p>Copy <code>XXXXXXXXXXXXXXXXXXXXXXX</code> value of <code>content</code> key.Edit theme config file and add or change <code>baidu_site_verification</code> section:</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_site_verification:</span> <span class="string">XXXXXXXXXXXXXXXXXXXXXXX</span></span><br></pre></td></tr></table></figure></li><li><p>Push the url to baidu automatically</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_push:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>submit sitemap</p></li></ul></li></ul><h5 id="Third-party-Services"><a href="#Third-party-Services" class="headerlink" title="Third-party Services"></a>Third-party Services</h5><p><strong>Comment Systems</strong></p><p><em>LiveRe (Korea)</em>:</p><ul><li><p>Create an account or log into <span class="exturl" data-url="aHR0cHM6Ly9saXZlcmUuY29tLw==">LiveRe<i class="fa fa-external-link-alt"></i></span>, click on the <code>installation</code> button and select the free city version, then click on the <code>install now</code> button.</p></li><li><p>Copy the <code>data-uid</code> field in the installation code to get your LiveRe UID.</p></li><li><p>Add the obtained LiveRe UID to the <code>livere_uid</code> section in the theme config file as following:</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">livere_uid:</span> </span><br></pre></td></tr></table></figure></li></ul><p>*Valine (China)*：</p><ul><li><p>Create an account or log into <span class="exturl" data-url="aHR0cHM6Ly9sZWFuY2xvdWQuY24v">LeanCloud<i class="fa fa-external-link-alt"></i></span>, and then click on the bottom left corner to create the application in dashboard.</p></li><li><p>Go to the application you just created, select <code>Settings → App Keys</code> in the lower left corner, and you will see your APP ID and APP Key.</p></li><li><p>Edit configurations in <code>valine</code> section in the theme config file as following:</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">valine:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">appId:</span> </span><br><span class="line">  <span class="attr">appKey:</span> </span><br></pre></td></tr></table></figure></li><li><p>评论数据管理：请自行登录<code>Leancloud应用</code>管理。具体步骤：<code>登录</code>&gt;<code>选择你创建的应用</code>&gt;<code>存储</code>&gt;选择Class <code>Comment</code></p></li></ul><p><strong>Statistics and Analytics</strong></p><p><em>Analytics Tools</em>:</p><ul><li><p>Baidu Analytics (China)</p><ul><li><p>Login to <span class="exturl" data-url="aHR0cHM6Ly90b25namkuYmFpZHUuY29tLw==">Baidu Analytics<i class="fa fa-external-link-alt"></i></span> and locate to site code getting page.</p></li><li><p>Copy the script ID after <code>hm.js?</code>.</p></li><li><p>Edit theme config file and change section <code>baidu_analytics</code> to your script ID.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">baidu_analytics:</span> </span><br></pre></td></tr></table></figure></li></ul></li><li><p>Google Analytics</p><ul><li><p>Create an account and log into <span class="exturl" data-url="aHR0cHM6Ly9hbmFseXRpY3MuZ29vZ2xlLmNvbS8=">Google Analytics<i class="fa fa-external-link-alt"></i></span>.</p></li><li><p>Edit theme config file and fill <code>tracking_id</code> under section <code>google_analytics</code> with your Google track ID. Google track ID always starts with <code>UA-</code> (最新版 Google Analytics 是 <code>G-</code>).</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">google_analytics:</span></span><br><span class="line">  <span class="attr">tracking_id:</span> <span class="string">G-XXXXXXXX</span></span><br><span class="line">  <span class="attr">only_pageview:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><p><em>Counting Tools</em>:</p><p>Busuanzi Counting (China), Edit busuanzi_count option in theme config file.</p><p>不蒜子是基于域名来进行统计计算的。数据比百度统计多很多。网络不好的话，数据与图标不一定显示得出来。</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><strong>Search Services</strong></p><p><em>Local Search</em>:</p><p>This search method is recommended for most users.</p><ul><li><p>Installation</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-searchdb</span><br></pre></td></tr></table></figure></li><li><p>Hexo Config</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br></pre></td></tr></table></figure></li><li><p>NexT Config</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>External Libraries</strong></p><p><em>PJAX</em>：</p><ul><li><p>You can enable it by setting value <code>pjax</code> to <code>true</code> in <code>theme config file</code>.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">pjax:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>It listens to every click on links you want (by default all of them).When an internal link is clicked, Pjax fetches the page’s HTML via AJAX.</p></li><li><p>Please use the absolute path of the image or <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlvL2RvY3MvdGFnLXBsdWdpbnMjSW5jbHVkZS1Bc3NldHM=">Hexo asset_img tag<i class="fa fa-external-link-alt"></i></span> in your posts, otherwise the images may fail to load during Pjax refresh.</p></li><li><p>例子：添加音乐播放器并保持跳转时不中断播放状态；fireworks 特效更流畅，不存在点击链接时的卡顿现象（点击链接时不会触发fireworks）。</p></li></ul><p><em>Fancybox</em>:</p><p>A jQuery lightbox script for displaying images, videos and more.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">fancybox:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><a href="https://github.com/ApoorvSaxena/lozad.js"><em>Lazyload</em></a>:</p><p>It delays loading of images in long web pages. Images outside of viewport will not be loaded before user scrolls to them.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">lazyload:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p><em>Progress Bar</em>:</p><p>NProgress will automatically monitor your Ajax requests, event loop lag, document ready state and elements on your page to decide on the progress.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">nprogress:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">spinner:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure><p><em>Canvas Ribbon</em>：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">canvas_ribbon:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">size:</span> <span class="number">300</span><span class="comment"># The width of the ribbon.</span></span><br><span class="line">  <span class="attr">alpha:</span> <span class="number">0.6</span><span class="comment"># The transparency of the ribbon.</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span><span class="comment"># The display level of the ribbon.</span></span><br></pre></td></tr></table></figure><p><em>粒子漂浮聚合</em>：</p><p>该功能由 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3RoZW1lLW5leHQvdGhlbWUtbmV4dC1jYW52YXMtbmVzdA==">theme-next-canvas-nest<i class="fa fa-external-link-alt"></i></span> 插件提供：</p><ul><li><p>Create a file named <code>footer.njk </code> in <code>hexo/source/_data</code> directory, Edit this file and add the following content</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script color&#x3D;&quot;0,0,255&quot; opacity&#x3D;&quot;0.5&quot; zIndex&#x3D;&quot;-1&quot; count&#x3D;&quot;99&quot; src&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;npm&#x2F;canvas-nest.js@1&#x2F;dist&#x2F;canvas-nest.js&quot;&gt;&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure></li><li><p>In the NexT <code>_config.yml</code>, uncomment <code>footer</code> under the <code>custom_file_path</code> section.</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="attr">footer:</span> <span class="string">source/_data/footer.njk</span></span><br></pre></td></tr></table></figure></li></ul><h5 id="Tag-Plugins"><a href="#Tag-Plugins" class="headerlink" title="Tag Plugins"></a>Tag Plugins</h5><p><a href="https://github.com/mermaid-js/mermaid"><strong>Mermaid</strong></a></p><ul><li><p>Settings</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">mermaid:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure></li><li><p>Usage</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;% mermaid type %&#125;</span><br><span class="line">&#123;% endmermaid %&#125;</span><br></pre></td></tr></table></figure></li></ul><h5 id="Advanced-Settings"><a href="#Advanced-Settings" class="headerlink" title="Advanced Settings"></a>Advanced Settings</h5><p><strong>Custom Files</strong></p><ul><li><p>uncomment under the section in <code>theme config file</code>.<code>stylecustom_file_path</code>。</p>  <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="attr">head:</span> <span class="string">source/_data/head.njk</span></span><br><span class="line">  <span class="attr">header:</span> <span class="string">source/_data/header.njk</span></span><br><span class="line">  <span class="string">...</span></span><br></pre></td></tr></table></figure></li><li><p>Edit in site root directory and add files:<code>source/_data/...</code>。</p></li><li><p>Then use it。</p></li><li><p>Stylus 是 CSS 的预处理框架，给 CSS 添加了可编程的特性。Stylus支持三种注释，单行注释（<code>//</code>)，多行注释(<code>/* */</code>)。</p></li><li><p>Nunjucks 是 jinja2 的 javascript 的实现，可以使用 <code>&#123;#` and `#&#125;</code> 来写注释，渲染时将会去除所有的注释。</p></li><li><p>不要直接修改 model 文件，而要使用 custom file，方便之后升级。</p></li></ul><p><strong>Front Matter</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">photos: &#x2F;uploads&#x2F;png.png</span><br><span class="line">---</span><br></pre></td></tr></table></figure><h3 id="Misc-Settings"><a href="#Misc-Settings" class="headerlink" title="Misc Settings"></a>Misc Settings</h3><p>想要什么功能可以搜一下，看是否有现成的 model 可以使用。</p><p><strong>网易云音乐</strong></p><ul><li>在网页版云音乐中找到歌曲，点击生成外链播放器</li><li>根据个人喜好选择播放器尺寸和播放模式</li><li>将获取到的 iframe 代码添加到页面中</li></ul><p><strong><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0RJWWdvZC9BUGxheWVy">Aplayer<i class="fa fa-external-link-alt"></i></span> 音频播放器</strong></p><ul><li><p>借助 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL01vZVBsYXllci9oZXhvLXRhZy1hcGxheWVy">hexo-tag-aplayer<i class="fa fa-external-link-alt"></i></span> 插件，可以通过标签的形式方便快捷的插入音频组件。</p></li><li><p>Installation</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-tag-aplayer</span><br></pre></td></tr></table></figure></li><li><p>Usage</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% aplayer &quot;title&quot; &quot;author&quot; &quot;url&quot; [&quot;picture_url&quot;, &quot;narrow&quot;, &quot;autoplay&quot;, &quot;width:xxx&quot;, &quot;lrc:xxx&quot;] %&#125;</span><br></pre></td></tr></table></figure><ul><li>title: 曲目标题</li><li>author: 曲目作者</li><li>url: 音乐文件 URL 地址</li><li>picture_url: (可选) 音乐对应的图片地址</li><li>narrow: （可选）播放器袖珍风格</li><li>autoplay: (可选) 自动播放，移动端浏览器暂时不支持此功能</li><li>width:xxx: (可选) 播放器宽度 (默认: 100%)</li><li>lrc:xxx: （可选）歌词文件 URL 地址</li></ul></li><li><p>当开启 Hexo 的 文章资源文件夹功能时，可直接引用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% aplayer &quot;Caffeine&quot; &quot;Jeff Williams&quot; &quot;caffeine.mp3&quot; &quot;picture.jpg&quot; &quot;lrc:caffeine.txt&quot; %&#125;</span><br></pre></td></tr></table></figure></li></ul><p><strong><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0RJWWdvZC9EUGxheWVy">Dpalyer<i class="fa fa-external-link-alt"></i></span> 视频播放器</strong></p><ul><li><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL01vZVBsYXllci9oZXhvLXRhZy1kcGxheWVy">Installation<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-tag-dplayer --save</span><br></pre></td></tr></table></figure></li><li><p>Usage</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% dplayer &quot;url&#x3D;video-url&quot; &quot;pic&#x3D;image-url&quot; ... [&quot;key&#x3D;value&quot;] %&#125;</span><br></pre></td></tr></table></figure></li><li><p>部分重要 key</p><ul><li>播放器<ul><li>autoplay：是否开启视频自动播放，默认为 <code>fasle</code></li><li>loop：是否开启视频循环播放，默认为 <code>false</code></li><li>screenshot：是否开启截图，默认为 <code>false</code></li><li>mutex：是否禁止多个播放器同时播放，默认为 <code>true</code></li><li>dmunlimited：是否开启海量弹幕模式，默认为 <code>false</code></li><li>preload：预加载模式，可选 <code>note</code> <code>metadata</code> <code>auto</code></li><li>theme：主题色</li><li>lang：语言，可选 <code>en</code> <code>zh-cn</code> <code>zh-tw</code></li><li>logo：左上角的 Logo</li><li>volume：默认音量，默认为 0.7</li><li>width：播放器宽度</li><li>height：播放器长度</li></ul></li><li>视频<ul><li>url：视频链接</li><li>pic：视频封面</li><li>thumbnails：视频缩略图，可以使用 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL01vZVBsYXllci9EUGxheWVyLXRodW1ibmFpbHM=">DPlayer-thumbnails<i class="fa fa-external-link-alt"></i></span> 生成</li><li>vidtype：视频类型，可选 <code>auto</code> <code>hls</code> <code>flv</code> <code>dash</code> 或其他自定义类型</li></ul></li><li>字幕<ul><li>suburl：字幕链接</li><li>subtype：字幕类型，可选 <code>webvtt</code> <code>ass</code>，目前只支持 <code>webvtt</code></li><li>subbottom：字幕距离播放器底部的距离，如 <code>10px</code> <code>10%</code></li><li>subcolor：字幕颜色</li></ul></li><li>弹幕<ul><li>id：弹幕 id</li><li>api：弹幕 api</li><li>token：弹幕后端验证 token</li><li>addition：额外外挂弹幕</li><li>dmuser：弹幕用户名</li><li>maximum：弹幕最大数量</li></ul></li></ul></li></ul><p><strong>看板娘</strong></p><p>该功能由 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0VZSE4vaGV4by1oZWxwZXItbGl2ZTJk">hexo-helper-live2d<i class="fa fa-external-link-alt"></i></span> 插件支持</p><ul><li><p>Installation</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure></li><li><p>Config：在站点配置文件中设置，主题配置文件中设置没用</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">scriptFrom:</span> <span class="string">local</span></span><br><span class="line">  <span class="attr">pluginRootPath:</span> <span class="string">live2dw/</span></span><br><span class="line">  <span class="attr">pluginJsPath:</span> <span class="string">lib/</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span></span><br><span class="line">  <span class="attr">tagMode:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">log:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">model:</span></span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-shizuku</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">right</span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">150</span></span><br><span class="line">    <span class="attr">height:</span> <span class="number">300</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">react:</span></span><br><span class="line">    <span class="attr">opacity:</span> <span class="number">0.7</span></span><br></pre></td></tr></table></figure></li><li><p>Models：可以从 <span class="exturl" data-url="aHR0cHM6Ly9odWFqaTgudG9wL3Bvc3QvbGl2ZTJkLXBsdWdpbi0yLjAv">hexo live2d 模型预览<i class="fa fa-external-link-alt"></i></span> 里找到你喜欢的角色，然后根据 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3hpYXpleXUvbGl2ZTJkLXdpZGdldC1tb2RlbHM=">live2d-widget-models<i class="fa fa-external-link-alt"></i></span> 中提供的方法来下载模型数据.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install live2d-widget-model-shizuku</span><br></pre></td></tr></table></figure></li></ul><p><a href="https://github.com/next-theme/hexo-next-fireworks"><strong>Fireworks</strong></a></p><p>一个鼠标点击动画特效</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install next-theme/hexo-next-fireworks</span><br></pre></td></tr></table></figure><p><a href="https://github.com/suyin-long/activate-power-mode"><strong>activate-power-mode</strong></a></p><p>一个为博客添加酷炫打字特效的插件</p><ul><li><p>编辑 <code>/hexo-site/source/_data/footer.njk</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;cdn.jsdelivr.net&#x2F;gh&#x2F;suyin-long&#x2F;activate-power-mode@1.0&#x2F;dist&#x2F;activate-power-mode.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">POWERMODE.colorful &#x3D; true; &#x2F;&#x2F; make power mode colorful</span><br><span class="line">POWERMODE.shake &#x3D; false; &#x2F;&#x2F; turn off shake</span><br><span class="line">document.body.addEventListener(&#39;input&#39;, POWERMODE);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure></li><li><p>取消<code>footer: source/_data/footer.njk</code>的注释</p></li></ul><p><strong>搞怪网页标题</strong></p><ul><li><p>编辑 <code>/hexo-site/source/_data/head.njk</code>，添加</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;# 搞怪网页标题 #&#125; &#123;% if theme.title_trick.enable %&#125;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  var OriginTitile &#x3D; document.title;</span><br><span class="line">  var titleTime;</span><br><span class="line">  document.addEventListener(&quot;visibilitychange&quot;, function() &#123;</span><br><span class="line">    if (document.hidden) &#123;</span><br><span class="line">      document.title &#x3D; &quot;&#123;&#123; theme.title_trick.leave &#125;&#125;&quot;;</span><br><span class="line">      clearTimeout(titleTime);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      document.title &#x3D; &quot;&#123;&#123; theme.title_trick.enter &#125;&#125;&quot;;</span><br><span class="line">      titleTime &#x3D; setTimeout(function() &#123;</span><br><span class="line">        document.title &#x3D; OriginTitile;</span><br><span class="line">      &#125;, 2000);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure></li><li><p>在主题配置文件中添加</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a trick on website title</span></span><br><span class="line"><span class="attr">title_trick:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">leave:</span> <span class="string">&quot;(つェ⊂)我藏好了哦~&quot;</span></span><br><span class="line">  <span class="attr">enter:</span> <span class="string">&quot;(*´∇｀*) 被你发现啦~&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>我先是放在 <code>sorce/_data/head.njk</code> 中，问题是改变一次标题后就只显示网址。我认为 script 可能在 <code>&lt;title&gt;</code> 之前加载，所以就放在 <code>source/_data/header.njk</code>，正常运行。</p></li></ul><p><a href="https://github.com/next-theme/hexo-next-three"><strong>Hexo NexT Three</strong></a></p><ul><li><p>Install</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install next-theme/hexo-next-three</span><br></pre></td></tr></table></figure></li><li><p>Configure</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># JavaScript 3D library.</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/next-theme/hexo-next-three</span></span><br><span class="line"><span class="attr">three:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">defer:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">cdn:</span></span><br><span class="line">  <span class="attr">waves:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">cdn:</span></span><br><span class="line">  <span class="attr">lines:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">cdn:</span></span><br><span class="line">  <span class="attr">sphere:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">cdn:</span></span><br></pre></td></tr></table></figure></li></ul><p><a href="https://github.com/jiangtj-lab/hexo-cake-moon-menu"><strong>hexo-cake-moon-menu</strong></a></p><ul><li><p>How to use</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cake-moon-menu</span><br></pre></td></tr></table></figure></li><li><p>Config: In hexo <code>_config.yml</code> </p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">moon_menu:</span></span><br><span class="line">  <span class="attr">back2top:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-chevron-up</span></span><br><span class="line">    <span class="attr">func:</span> <span class="string">back2top</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-1</span></span><br><span class="line">  <span class="attr">back2bottom:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">fas</span> <span class="string">fa-chevron-down</span></span><br><span class="line">    <span class="attr">func:</span> <span class="string">back2bottom</span></span><br><span class="line">    <span class="attr">order:</span> <span class="number">-2</span></span><br></pre></td></tr></table></figure></li></ul><p><strong>permalink</strong></p><ul><li><p>默认的文章 url 地址为 <code>http://yoursite.com/:year/:month/:day/:title/</code>，这种 url 格式层级太多，并且如果文章标题是中文的话可能会发生转义而出现一堆乱码，不利于搜索引擎的爬取分析，因此建议在站点配置中修改 <code>permalink</code> 的格式来简化页面 url，并尽量采用英文命名 Markdown 文件。(这个根据个人选择，我认为有更有组织的文件结构更重要)</p></li><li><p>这个 front matter 必须是 html 文件，文件会生成到 public 根目录。</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">permalink: &#x2F;post-name.html</span><br><span class="line">---</span><br></pre></td></tr></table></figure></li></ul><p><strong>robots.txt</strong></p><p>robots.txt（统一小写）是一种存放于网站根目录下的ASCII编码的文本文件，它通常告诉网络搜索引擎的漫游器（又称网络蜘蛛），此网站中的哪些内容是不应被搜索引擎的漫游器获取的，哪些是可以被漫游器获取的。</p><p><span class="exturl" data-url="aHR0cDovL3Rvb2wuY2hpbmF6LmNvbS9yb2JvdHMv">robots.txt在线生成器<i class="fa fa-external-link-alt"></i></span></p><h3 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h3><p>CDN 的全称是(Content Delivery Network)，即内容分发网络。其目的是通过在现有的 Internet 中增加一层新的CACHE(缓存)层，将网站的内容发布到最接近用户的网络“边缘”的节点，使用户可以就近取得所需的内容，提高用户访问网站的响应速度。从技术上全面解决由于网络带宽小、用户访问量大、网点分布不均等原因，提高用户访问网站的响应速度。</p><img data-src="/2020/12/10/Hexo/CDN.webp" class="" title="CDN"><h5 id="CDN-工作原理"><a href="#CDN-工作原理" class="headerlink" title="CDN 工作原理"></a>CDN 工作原理</h5><p>传统访问过程：</p><img data-src="/2020/12/10/Hexo/CDN1.webp" class="" title="CDN"><ol><li>用户输入访问的域名，操作系统向 LocalDns 查询域名的ip地址</li><li>LocalDns 向 ROOT DNS 查询域名的授权服务器（这里假设LocalDns缓存过期）</li><li>ROOT DNS 将域名授权 dns 记录回应给 LocalDns</li><li>LocalDns 得到域名的授权 dns 记录后，继续向域名授权 dns 查询域名的 ip 地址</li><li>域名授权 dns 查询域名记录后，回应给 LocalDns</li><li>LocalDns 将得到的域名 ip 地址，回应给用户端</li><li>用户得到域名 ip 地址后，访问站点服务器</li><li>站点服务器应答请求，将内容返回给客户端</li></ol><p>CDN 访问过程：</p><img data-src="/2020/12/10/Hexo/CDN2.webp" class="" title="CDN"><ol><li>用户输入访问的域名，操作系统向 LocalDns 查询域名的 ip 地址</li><li>LocalDns 向 ROOT DNS 查询域名的授权服务器（这里假设LocalDns缓存过期）</li><li>ROOT DNS 将域名授权 dns 记录回应给 LocalDns</li><li>LocalDns 得到域名的授权 dns 记录后，继续向域名授权 dns 查询域名的 ip 地址</li><li>域名授权 dns 查询域名记录后（一般是CNAME），回应给 LocalDns</li><li>LocalDns 得到域名记录后，向智能调度 DNS 查询域名的 ip 地址</li><li>智能调度 DNS 根据一定的算法和策略，将最适合的 CDN 节点 ip 地址回应给 LocalDns</li><li>LocalDns 将得到的域名 ip 地址，回应给用户端</li><li>用户得到域名 ip 地址后，访问站点服务器</li><li>CDN 节点服务器应答请求，将内容返回给客户端</li></ol><h5 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h5><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC8xZGFlNmUxNjgwZmY=">CDN加速原理<i class="fa fa-external-link-alt"></i></span></p><h3 id="Great-Blogs"><a href="#Great-Blogs" class="headerlink" title="Great Blogs"></a>Great Blogs</h3><p><span class="exturl" data-url="aHR0cDovL3llYXJpdG8uY24vdGFncy9IZXhvLw==">yearito<i class="fa fa-external-link-alt"></i></span> ，<span class="exturl" data-url="aHR0cHM6Ly9zdXlpbi1ibG9nLmNsdWIvMjAyMC8zMjNFSDJZLw==">suyin<i class="fa fa-external-link-alt"></i></span> ，<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLnlsZWFvLmNvbS9jYXRlZ29yaWVzL0hleG8lRTYlOEElOTglRTglODUlQkUv">yleao<i class="fa fa-external-link-alt"></i></span> ，<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmRsemhhbmcuY29tL3Bvc3RzLzM2Lz9oaWdobGlnaHQ9aGV4bw==">dlzhang<i class="fa fa-external-link-alt"></i></span></p><h3 id="Version"><a href="#Version" class="headerlink" title="Version"></a>Version</h3><table><thead><tr><th>Name</th><th>Version</th></tr></thead><tbody><tr><td>npm</td><td>7.0.8</td></tr><tr><td>hexo</td><td>5.2.0</td></tr><tr><td>hexo-theme-next</td><td>8.0.2</td></tr></tbody></table>]]></content>
    
    
    <summary type="html">&lt;h3 id=&quot;Hexo&quot;&gt;&lt;a href=&quot;#Hexo&quot; class=&quot;headerlink&quot; title=&quot;Hexo&quot;&gt;&lt;/a&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9oZXhvLmlvL3poLWNuL2RvY3MvaW5kZXguaHRtbA==&quot;&gt;Hexo&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/h3&gt;&lt;p&gt;Hexo 是一个快速、简洁且高效的博客框架。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Hexo" scheme="https://vanehsiung.netlify.app/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>FreeBSD Desktop</title>
    <link href="https://vanehsiung.netlify.app/2020/11/28/FreeBSD-Desktop/"/>
    <id>https://vanehsiung.netlify.app/2020/11/28/FreeBSD-Desktop/</id>
    <published>2020-11-28T08:38:58.000Z</published>
    <updated>2020-12-11T13:13:55.274Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>The FreeBSD Desktop series are about creating efficient desktop environment on the FreeBSD system.</p><a id="more"></a><h3 id="Simplified-Boot"><a href="#Simplified-Boot" class="headerlink" title="Simplified Boot"></a>Simplified Boot</h3><p>The default FreeBSD boot process is quite verbose with a lot of debugging information along with kernel messages.</p><p>This verbose information is usually useful for servers but not that much for laptops and/or desktop/workstation systems. The UNIX philosophy is to not ‘say’ anything to stdout if everything is OK, so stdout/stderr should only be used when something is wrong.</p><p>Rules: prompt in less then 10 lines</p><ul><li><p>First add the <code>boot_mute=YES</code> option to the <code>/boot/loader.conf</code> file. As we are here, You may as well add <code>autoboot_delay=2</code> parameter to the <code>/boot/loader.conf</code> file to speed up boot process by 8 seconds. Default delay is 10 seconds.</p></li><li><p>In most cases its just adding <code>1&gt; /dev/null</code> or <code>1&gt; /dev/null 2&gt; /dev/null</code> to not display unneeded information at boot process.</p><ul><li><p><code>/etc/rc.d/ldconfig</code></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-check_startmsgs &amp;&amp; echo &#x27;ELF ldconfig path:&#x27; $&#123;_LDC&#125;</span></span><br><span class="line"><span class="addition">+check_startmsgs &amp;&amp; echo &#x27;ELF ldconfig path:&#x27; $&#123;_LDC&#125; 1&gt; /dev/null</span></span><br><span class="line"><span class="deletion">-echo &#x27;32-bit compatibility ldconfig path:&#x27; $&#123;_LDC&#125;</span></span><br><span class="line"><span class="addition">+echo &#x27;32-bit compatibility ldconfig path:&#x27; $&#123;_LDC&#125; 1&gt; /dev/null</span></span><br></pre></td></tr></table></figure></li><li><p><code>/etc/rc.d/netif</code></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-/sbin/ifconfig $&#123;ifn&#125;</span></span><br><span class="line"><span class="addition">+/sbin/ifconfig $&#123;ifn&#125; 1&gt; /dev/null 2&gt; /dev/null</span></span><br></pre></td></tr></table></figure></li><li><p><code>/etc/rc.d/nfsclient</code></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-rpc.umntall -k</span></span><br><span class="line"><span class="addition">+rpc.umntall -k 2&gt; /dev/null</span></span><br></pre></td></tr></table></figure></li><li><p><code>/etc/rc.d/random</code></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-       if [ $&#123;harvest_mask&#125; -gt 0 ]; then</span></span><br><span class="line"><span class="deletion">-               echo -n &#x27;Setting up harvesting: &#x27;</span></span><br><span class="line"><span class="deletion">-               $&#123;SYSCTL&#125; kern.random.harvest.mask=$&#123;harvest_mask&#125; &gt; /dev/null</span></span><br><span class="line"><span class="deletion">-               $&#123;SYSCTL_N&#125; kern.random.harvest.mask_symbolic</span></span><br><span class="line"><span class="deletion">-       fi</span></span><br><span class="line"><span class="addition">+       #if [ $&#123;harvest_mask&#125; -gt 0 ]; then</span></span><br><span class="line"><span class="addition">+       #      echo -n &#x27;Setting up harvesting: &#x27;</span></span><br><span class="line"><span class="addition">+       #      $&#123;SYSCTL&#125; kern.random.harvest.mask=$&#123;harvest_mask&#125; &gt; /dev/null</span></span><br><span class="line"><span class="addition">+       #      $&#123;SYSCTL_N&#125; kern.random.harvest.mask_symbolic</span></span><br><span class="line"><span class="addition">+       #fi</span></span><br></pre></td></tr></table></figure></li><li><p><code>/etc/rc.d/routing</code></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-eval static_$&#123;_a&#125; delete $_if</span></span><br><span class="line"><span class="addition">+eval static_$&#123;_a&#125; delete $_if 1&gt; /dev/null 2&gt; /dev/null</span></span><br><span class="line"><span class="deletion">-static_$2 add $3</span></span><br><span class="line"><span class="addition">+static_$2 add $3 1&gt; /dev/null 2&gt; /dev/null</span></span><br><span class="line"><span class="deletion">-static_$2 add $3</span></span><br><span class="line"><span class="addition">+static_$2 add $3 1&gt; /dev/null 2&gt; /dev/null</span></span><br></pre></td></tr></table></figure></li><li><p><code>/etc/rc.d/devmatch</code></p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-echo &quot;Autoloading module: $&#123;m&#125;&quot;</span></span><br><span class="line"><span class="addition">+#echo &quot;Autoloading module: $&#123;m&#125;&quot;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>I prefer not to use a login manager so I have an alias named <code>x</code> to <code>xinit</code> command. This way after I login I type <code>x</code> press [ENTER] and x11 desktop is started.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x: aliased to xinit ~/.xinitrc -- -dpi 75 -nolisten tcp 1&gt; /dev/null 2&gt; /dev/null</span><br></pre></td></tr></table></figure></li><li><p>we can silence the FreeBSD boot process even more. Just add <code>rc_startmsgs=&quot;NO&quot;</code> to your <code>/etc/rc.conf</code> file.</p></li></ul><h5 id="Reply"><a href="#Reply" class="headerlink" title="Reply"></a>Reply</h5><p>For troubleshooting issues, Most boot messages can be found under:</p><ul><li>dmesg</li><li>(cat|tail|grep|less|more..) /var/log/messages</li></ul><p>Also don’t really need it printing the default routes, netstat -r works great.</p><p>Tmux is useful.</p><p>(dislike)To disable the boot menu, put the following line in <code>/boot/loader.conf</code>: <code>beastie_disable=&quot;YES&quot;</code></p><h3 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><h5 id="BIOS"><a href="#BIOS" class="headerlink" title="BIOS"></a>BIOS</h5><p>Disable unused (Express Card/Bluetooth/Camera/Fingerprint Reader/…) and unwanted options (Intel AMT/Security Chip/UEFI/…).</p><h5 id="Install-1"><a href="#Install-1" class="headerlink" title="Install"></a>Install</h5><ul><li><p>To put the image on the pendrive we will use the dd tool available on almost any Mac OS X (macOS) and Linux system. For Windows You will have to download it from here – <span class="exturl" data-url="aHR0cDovL3d3dy5jaHJ5c29jb21lLm5ldC9kZA==">dd for windows<i class="fa fa-external-link-alt"></i></span>( bs=1M on Linux/Windows ).</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo dd if=FreeBSD-11.1-RELEASE-amd64-memstick.img of=/dev/da1 bs=1m</span><br></pre></td></tr></table></figure></li><li><p>When we have a new machine there is always a problem with new name for it. The RFC 1178 <span class="exturl" data-url="aHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzExNzg=">Choosing a Name for Your Computer<i class="fa fa-external-link-alt"></i></span> from 1990 year tries to address that issue </p></li><li><p>We do not need any additional components, with all deselected as shown below only the (not shown) base and kernel will be installed.</p></li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/freebsd-11-1-laptop-install-04.png" class="" title="FreeBSD"><ul><li>We will use ZFS because we want to use Boot Environments with sysutils/beadm port.<ul><li>Hit [ENTER] on the <code>Pool Type/Disks</code> to select target disk to install FreeBSD on.</li><li>Now (in FreeBSD 12.x) it is possible to install FreeBSD on GELI encrypted root on ZFS pool without any additional partitions or filesystems. You need to select is <code>Yes</code> for the <code>Encryption</code> part .</li><li>I advice using <code>GPT (BIOS+UEFI)</code> as it will support both system types so when you are running BIOS system now and will move the disk to other system that boots with UEFI it will also just work out of the box.</li><li>We will set SWAP size to <code>0</code> (no SWAP) as it will not be needed. If we will need SWAP in the future, then we will create ZVOL on ZFS and use it as a SWAP device.</li></ul></li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/freebsd-install-03.png" class="" title="FreeBSD"><ul><li>Select services as shown below.</li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/freebsd-11-1-laptop-install-23.png" class="" title="FreeBSD"><ul><li>Enable all security hardening features as shown below.</li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/freebsd-11-1-laptop-install-24.png" class="" title="FreeBSD"><h5 id="Boot"><a href="#Boot" class="headerlink" title="Boot"></a>Boot</h5><p>If You will have attached LAN cable and your interface is <code>em0</code> (check <code>ifconfig</code> command output) then <code>dhclient em0</code> command should grant You the working connection to the Internet – assuming that You have DHCP server on that network. </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifconfig em0 up</span><br><span class="line">dhclient em0</span><br></pre></td></tr></table></figure><p>To test the network connectivity use the <code>ping</code> command.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ping -c 3 freebsd.org</span><br></pre></td></tr></table></figure><p>If You would like to connect to the World with wireless connection then here are the needed commands. First lets check what wireless card You have.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl net.wlan.devices</span><br></pre></td></tr></table></figure><p>We will now create <code>wlan</code> virtual device on top of our <code>iwn0</code> device and bring it up.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifconfig wlan0 create wlandev iwn0</span><br><span class="line">ifconfig wlan0 up</span><br></pre></td></tr></table></figure><p>We can scan for existing nearby WiFi access points if needed.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig wlan0 scan</span><br></pre></td></tr></table></figure><p>Now we need to add the desired WiFi network to the /etc/wpa_supplicant.conf file as shown below.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">network&#x3D;&#123;</span><br><span class="line">  ssid&#x3D;&quot;WIFI-NETWORK-NAME&quot;</span><br><span class="line">  psk&#x3D;&quot;PASSWORD&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Then You may connect to it using the <code>wpa_supplicant</code> daemon. Hit the <code>[CTRL]+[Z]</code> key combination to put the process into suspended state. Then we type the <code>bg</code> command to put it back into running state, but in the background so we can continue to type next commands.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wpa_supplicant -i wlan0 -c /etc/wpa_supplicant.conf</span><br></pre></td></tr></table></figure><p>Now we will request for the IP address from the access point DHCP server.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dhclient wlan0</span><br></pre></td></tr></table></figure><h3 id="X11-Window-System"><a href="#X11-Window-System" class="headerlink" title="X11 Window System"></a>X11 Window System</h3><h5 id="BIOS-or-UEFI"><a href="#BIOS-or-UEFI" class="headerlink" title="BIOS or UEFI"></a>BIOS or UEFI</h5><p>First things first, if You find a device that is not supported by any ‘accelerated’ driver like <code>intel</code> or <code>nvidia</code>. You would use <code>vesa</code> driver (Video Electronics Standards Association) while booting in BIOS mode and You will use <code>scfb</code> driver (System Console Frame Buffer) while booting on UEFI mode. This can be checked by </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl machdep.bootmethod</span><br></pre></td></tr></table></figure><h5 id="Packages"><a href="#Packages" class="headerlink" title="Packages"></a>Packages</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkg install xorg xdm xterm openbox xf86-video-intel</span><br></pre></td></tr></table></figure><h5 id="Group"><a href="#Group" class="headerlink" title="Group"></a>Group</h5><p>To have hardware accelerated X11 You will also need to add your regular user to the <code>video</code> group.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pw groupmod video -m username</span><br></pre></td></tr></table></figure><h5 id="Login-Class"><a href="#Login-Class" class="headerlink" title="Login Class"></a>Login Class</h5><p>Remember to also add UTF-8 as the default encoding in the <code>/etc/login.conf</code> file as show below. Also, after adding them, run the <code>cap_mkdb /etc/login.conf</code> command as root and relogin with your regular user.</p><figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="addition">+:charset=UTF-8:\</span></span><br><span class="line"><span class="addition">+:lang=en_US.UTF-8:\</span></span><br></pre></td></tr></table></figure><p>The UTF-8 encoding – same as in the <code>lang</code> parameter in the <code>/etc/login.conf</code> file – must be added at the begining of your <code>~/.xinitrc</code> file, like that:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> LC_ALL=en_US.UTF-8</span><br></pre></td></tr></table></figure><h5 id="Kernel-Module"><a href="#Kernel-Module" class="headerlink" title="Kernel Module"></a>Kernel Module</h5><p>Most computers/laptops/servers will have integrated GPU which should be supported by the X11 <code>intel</code> driver and:</p><ul><li><code>/boot/kernel/i915kms.ko</code> from base system</li><li><code>/boot/modules/i915kms.ko</code> from <code>drm-next-kmod</code> package (port moved to graphics/drm-fbsd12.0-kmod on 2018-12-09)</li></ul><p>To add the KMS (Kernel Mode Setting) Intel module loading into the <code>/etc/rc.conf</code> file put the line below into it.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kld_list=<span class="string">&quot;<span class="variable">$&#123;kld_list&#125;</span> i915kms&quot;</span></span><br></pre></td></tr></table></figure><p>In case of need to use <code>drm-next-kmod</code> module instead of the base system one, your <code>/etc/rc.conf</code> file would look like that one below.</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kld_list=<span class="string">&quot;<span class="variable">$&#123;kld_list&#125;</span> /boot/modules/i915kms.ko&quot;</span></span><br></pre></td></tr></table></figure><p>If you find yourself in the situation that the <code>drm-next-kmod</code> would still not support your latest graphics card then you may try the latest version of the <code>drm-next-kmod</code>.</p><h5 id="X11-Window-System-Configuration"><a href="#X11-Window-System-Configuration" class="headerlink" title="X11 Window System Configuration"></a>X11 Window System Configuration</h5><p>You can just configure these parts of X11 server that You need without touching other parts. This individual configuration is done in the <code>/usr/local/etc/X11/xorg.conf.d</code> directory with individual files for each setting.</p><ul><li><p>The DontZap option is to enable the X11 server abort with <code>[CTRL] + [ALT] + [BACKSPACE]</code> shortcut.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat /usr/local/etc/X11/xorg.conf.d/flags.conf</span><br><span class="line">Section &quot;ServerFlags&quot;</span><br><span class="line">  Option &quot;DontZap&quot; &quot;off&quot;</span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure></li><li><p><code>terminate:ctrl_alt_bksp</code> to allow termination of the X11 server with <code>[CTRL] + [ALT] + [BACKSPACE]</code> shortcut and <code>ctrl:nocaps</code> to ignore the Caps Lock key as I also find that useful.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">cat /usr/local/etc/X11/xorg.conf.d/keyboard.conf</span><br><span class="line">Section &quot;InputDevice&quot;</span><br><span class="line">  Identifier &quot;Keyboard0&quot;</span><br><span class="line">  Driver &quot;kbd&quot;</span><br><span class="line">  Option &quot;XkbLayout&quot; &quot;us&quot;</span><br><span class="line">  Option &quot;XkbOptions&quot; &quot;terminate:ctrl_alt_bksp,ctrl:nocaps&quot;</span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure></li><li><p>graphics card configuration</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat /usr/local/etc/X11/xorg.conf.d/card.conf</span><br><span class="line">Section &quot;Device&quot;</span><br><span class="line">  Identifier &quot;Card0&quot;</span><br><span class="line">  Option &quot;DPMS&quot;</span><br><span class="line">  Driver &quot;intel&quot;</span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure></li></ul><h5 id="XDM-or-XINIT-STARTX"><a href="#XDM-or-XINIT-STARTX" class="headerlink" title="XDM or XINIT/STARTX"></a>XDM or XINIT/STARTX</h5><p>You will also have to decide how You want to start your X11 Window Server, you may login in plan text console and then type <code>xinit</code> or <code>startx</code> to read your <code>~/.xinitrc</code> configuration and daemons or You may want to use X11 Login manager such as <code>xdm/sddm/slim</code> with <code>~/.xsession</code> configuration to load after successful login. The difference between <code>xinit</code> and <code>startx</code> is that <code>startx</code> command executes <code>xinit</code> command with arguments.</p><p>When I use <code>xinit</code> to directly start the X11 server I use an alias to <code>xinit</code> with these parameters:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> x=<span class="string">&#x27;xinit ~/.xinitrc -- -dpi 75 -nolisten tcp&#x27;</span></span><br></pre></td></tr></table></figure><p>I keep that alias in the <code>~/.zshrc</code> file.</p><p>While <code>xinit</code> run commands based on the <code>~/.xinitrc</code> file the XDM login manager looks for the <code>~/.xsession</code> file. As You will be loading same stuff regardless of the startup method we will create a link of <code>~/.xsession</code> pointing to the <code>~/.xinitrc</code> file. This way either method You choose You will always end with started X11 session.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s ~/.xinitrc ~/.xsession</span><br></pre></td></tr></table></figure><p>One more case about the <code>~/.xinitrc</code> (or <code>~/.xsession</code>) file. It is interpreted as a shell script (and yes you can do <code>if/then/else/fi</code> and <code>case/esac</code> or <code>for/while</code> POSIX shell scripting in it) but it does not need to be executable. The last command in this file MUST NOT to be put in the background (must be without the <code>&amp;</code> char at the end) because the X11 session will end.</p><h5 id="XDM-Black-Theme"><a href="#XDM-Black-Theme" class="headerlink" title="XDM Black Theme"></a>XDM Black Theme</h5><p>To configure this black XDM theme You will need to modify contents of two files as show below.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat /usr/local/etc/X11/xdm/Xsetup_0</span><br><span class="line">xsetroot -solid black</span><br></pre></td></tr></table></figure><p>This we will set black background on the login screen on the :<code>0</code> X11 server – the default one.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">cat /usr/local/etc/X11/xdm/Xresources</span><br><span class="line">xlogin.Login.greeting:</span><br><span class="line">xlogin.Login.unsecureGreeting:</span><br><span class="line">xlogin.Login.fail:                Fail.</span><br><span class="line">xlogin.Login.changePasswdMessage: Change.</span><br><span class="line">xlogin.Login.namePrompt:          Username:</span><br><span class="line">xlogin.Login.passwdPrompt:        Password:</span><br><span class="line">xlogin.Login.echoPasswd:          true</span><br><span class="line">xlogin.Login.background:          black</span><br><span class="line">xlogin.Login.foreground:          white</span><br><span class="line">xlogin.Login.failColor:           #cccccc</span><br><span class="line">xlogin.Login.inpColor:            black</span><br><span class="line">xlogin.Login.promptColor:         #aaaaaa</span><br><span class="line">xlogin.Login.face:                courier:size=13:style=Bold</span><br><span class="line">xlogin.Login.failFace:            courier:size=13:style=Bold</span><br><span class="line">xlogin.Login.promptFace:          courier:size=13:style=Normal</span><br><span class="line">xlogin.Login.greetFace:           courier:size=13</span><br><span class="line">xlogin.Login.width:               400</span><br></pre></td></tr></table></figure><img data-src="/2020/11/28/FreeBSD-Desktop/xdm-black.png" class="" title="FreeBSD"><h5 id="Client-Configuration"><a href="#Client-Configuration" class="headerlink" title="Client Configuration"></a>Client Configuration</h5><p> the simple <code>~/.xinitrc</code> file with <code>Openbox</code> window manager, prestarted <code>xterm</code> terminal and black background for our simple session.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cat ~/.xinitrc</span><br><span class="line"><span class="meta">#</span><span class="bash"> SET PROPER locale(1) with LC_ALL VARIABLE.</span></span><br><span class="line">  export LC_ALL=en_US.UTF-8</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> PRESTARTED APPS</span></span><br><span class="line">  xterm &amp;</span><br><span class="line">  xsetroot -solid black &amp;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> WINDOW MANAGER</span></span><br><span class="line">  openbox</span><br></pre></td></tr></table></figure><img data-src="/2020/11/28/FreeBSD-Desktop/desktop.png" class="" title="FreeBSD"><h5 id="Using-modesetting-Driver"><a href="#Using-modesetting-Driver" class="headerlink" title="Using modesetting Driver"></a>Using modesetting Driver</h5><p>If you use <code>i915kms</code> kernel module, you don’t need to install <code>xf86-video-intel</code>, the <code>modesetting</code> generic DDX driver that is built in the X server, will do just well. The xf86-video-intel might even cause you troubles.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat /usr/local/etc/X11/xorg.conf.d/card.conf</span><br><span class="line">Section &quot;Device&quot;</span><br><span class="line">  Identifier &quot;Card0&quot;</span><br><span class="line">  Option &quot;DPMS&quot;</span><br><span class="line">  Driver &quot;modesetting&quot;</span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure><h5 id="Using-Dedicated-video-Login-Class-Instead-of-Global-One"><a href="#Using-Dedicated-video-Login-Class-Instead-of-Global-One" class="headerlink" title="Using Dedicated video: Login Class Instead of Global One"></a>Using Dedicated video: Login Class Instead of Global One</h5><p>（可解决中文乱码）</p><p>If you modify <code>/etc/login.conf</code>, you are modifying the systemwide locale for the default login class to which all users belong (also user www for Apache, for example).</p><p>Add this login class to the <code>/etc/login.conf</code> file.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">video:\</span><br><span class="line">        :charset&#x3D;UTF-8:\</span><br><span class="line">        :lang&#x3D;en_US.UTF-8:\</span><br><span class="line">        :tc&#x3D;default:</span><br></pre></td></tr></table></figure><p>Rebuild the login class database.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cap_mkdb &#x2F;etc&#x2F;login.conf</span><br></pre></td></tr></table></figure><p>Lets set the login class to video for the vuk user.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pw usermod -L video -n vuk</span><br></pre></td></tr></table></figure><p>How the account looks after setting the login class.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep vuk /etc/master.passwd</span><br><span class="line">vuk:&#123;REMOVED&#125;:1000:1000:video:0:0:vuk:/home/vuk:/bin/sh</span><br></pre></td></tr></table></figure><p>Now logout and login again to make that work. View the changes through the <code>locale</code> command.</p><h5 id="Tap-to-Click-on-Synaptics-Touchpad"><a href="#Tap-to-Click-on-Synaptics-Touchpad" class="headerlink" title="Tap to Click on Synaptics Touchpad"></a>Tap to Click on Synaptics Touchpad</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pkg install xf86-input-synaptics</span><br><span class="line"></span><br><span class="line">cat /usr/local/etc/X11/xorg.conf.d/touchpad.conf</span><br><span class="line">Section &quot;InputClass&quot;</span><br><span class="line">  Identifier &quot;touchpad&quot;</span><br><span class="line">  MatchIsTouchpad &quot;on&quot;</span><br><span class="line">  Driver &quot;libinput&quot;</span><br><span class="line">  Option &quot;Tapping&quot; &quot;on&quot;</span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure><h3 id="Key-Components"><a href="#Key-Components" class="headerlink" title="Key Components"></a>Key Components</h3><h5 id="Window-Manager"><a href="#Window-Manager" class="headerlink" title="Window Manager"></a>Window Manager</h5><p>The <span class="exturl" data-url="aHR0cHM6Ly93d3cuYm94LWxvb2sub3JnL3AvMTAxNzgzMi8=">TWM<i class="fa fa-external-link-alt"></i></span> <em>Openbox</em> theme.</p><img data-src="/2020/11/28/FreeBSD-Desktop/openbox-theme-twm.png" class="" title="FreeBSD"><p>If You would like to increase your knowledge about Openbox then check the official documentation: <span class="exturl" data-url="aHR0cDovL29wZW5ib3gub3JnL3dpa2kvTWFpbl9QYWdl">Openbox<i class="fa fa-external-link-alt"></i></span></p><h5 id="Status-Bar"><a href="#Status-Bar" class="headerlink" title="Status Bar"></a>Status Bar</h5><p>Also known as information bar, the place on the screen that would provide You needed information such as current date and time, CPU, RAM and storage usage, current network information or battery status.</p><ul><li>While <code>Xmobar</code> is nice solution it comes with about 2 GB of dependencies of Haskell and Haskell libraries.</li><li>While <code>Polybar</code> can look very nice on screenshots it is a lot more heavy on resources and is limited only to modules/features that were implemented in it.</li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/openbox-polybar.jpg" class="" title="FreeBSD"><ul><li>I have used <code>Conky</code> for quite long time but after recent tests I made <code>Dzen2</code> is a lot less on resources then Conky while doing the same thing. </li></ul><h5 id="Task-Bar"><a href="#Task-Bar" class="headerlink" title="Task Bar"></a>Task Bar</h5><p>A taskbar is an element of a graphical user interface which has various purposes. It typically shows which programs are currently running.</p><ul><li>You can use classic taskbar like <code>XFCE Panel</code> used in the XFCE desktop environment.</li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/taskbar-xfce.png" class="" title="FreeBSD"><ul><li>You can also configure <code>Tint2</code> that way. But it only shows applications that are active on the current desktop.</li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/taskbar-tint-classic.jpg" class="" title="FreeBSD"><ul><li>One of the greatest taskbars of all time was/is the Mac OS X Dock (now macOS Dock).  It also has an indicator showing if application is launched. Currently the best and lightest solution for providing the dock-like functionality on open desktops seems to be <code>Plank</code>.</li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/taskbar-plank-eos.png" class="" title="FreeBSD"><h5 id="Wallpaper-Handling"><a href="#Wallpaper-Handling" class="headerlink" title="Wallpaper Handling"></a>Wallpaper Handling</h5><p>Some people have a set of favorite wallpapers and setup random wallpaper from this set of favorites to show up every once in a while.</p><p>While <code>Feh</code> main/original function is to be ultra fast image viewer it also has an option to properly setup a wallpaper on a X11 desktop.</p><h5 id="Application-Launcher"><a href="#Application-Launcher" class="headerlink" title="Application Launcher"></a>Application Launcher</h5><p>While not being any crucial role of the desktop environment it have its uses and sometimes save time.</p><p>Lets start with resources, the <code>Rofi</code> implementation of application launcher uses almost 3 times more RAM  then <code>Dmenu</code> solution.</p><ul><li>Desktop with Dmenu launched and with <code>alc</code> characters inserted to ‘filter’ commands in the search of a calculator application.</li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/launcher-dmenu-run.jpg" class="" title="FreeBSD"><ul><li><p>The Rofi requires simple command.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rofi -show run -theme solarized_alternate -font &quot;Monaco 8&quot;</span><br></pre></td></tr></table></figure></li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/launcher-rofi.jpg" class="" title="FreeBSD"><h5 id="Keyboard-Mouse-Shortcuts"><a href="#Keyboard-Mouse-Shortcuts" class="headerlink" title="Keyboard/Mouse Shortcuts"></a>Keyboard/Mouse Shortcuts</h5><p>While most window managers and desktop environments offer some kind of shortcuts or tools to define your own ones. its often quite complicated to force them to do exactly what you want. </p><ul><li>The <code>xev</code> is used to read what has keyboard key has been pressed or which mouse button was used.</li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/keyboard-xev.jpg" class="" title="FreeBSD"><ul><li>The <code>Xmodmap</code> is used to assign or rename keys to make something different.</li><li>Similarly like xev the <code>xbindkeys</code> comes with its own window to catch events.</li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/keyboard-xbindkeys.jpg" class="" title="FreeBSD"><ul><li>Sometimes you want to fake that some keys were pressed – but without pressing them. This is where <code>xdotool</code> comes handy – it can generate any keyboard shortcut and send it to and application in X11 environment. </li></ul><h5 id="Locking-Solution"><a href="#Locking-Solution" class="headerlink" title="Locking Solution"></a>Locking Solution</h5><ul><li>From all the nice looking solutions providing screen lock on the X11 I found <code>mate-screensaver</code> the best choice for this task ( saves battery time ). The mate-screensaver has to be started and run in the background with, well <code>mate-screensaver</code> command – placed somewhere in the <code>~/.xinitrc</code> or <code>~/.xsession</code> file. Then we would be able to invoke <code>mate-screensaver-command --lock</code> command to make the actual screen lock.</li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/locker-mate-screensaver.png" class="" title="FreeBSD"><ul><li><p>When mate-screensaver will not be available or functional we will use <code>xlock</code> as failover solution. The xlock tool appearance can be configured by specifying arguments.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">FONT&#x3D;&#39;-*-fixed-*-*-*-*-10-*-*-*-*-*-iso8859-2&#39;</span><br><span class="line">xlock \</span><br><span class="line">  -mode image \</span><br><span class="line">  -planfont &quot;$&#123;FONT&#125;&quot; \</span><br><span class="line">  -font     &quot;$&#123;FONT&#125;&quot; \</span><br><span class="line">  -username &#39;user: &#39; \</span><br><span class="line">  -password &#39;pass:&#39; \</span><br><span class="line">  -info &#39; &#39; \</span><br><span class="line">  -validate &#39;Checking.&#39; \</span><br><span class="line">  -invalid &#39;Nope. &#39; \</span><br><span class="line">  -background gray20 \</span><br><span class="line">  -foreground gray60 \</span><br><span class="line">  -dpmsoff 1 \</span><br><span class="line">  -icongeometry 64x64 \</span><br><span class="line">  -echokeys \</span><br><span class="line">  -echokey &#39;*&#39; \</span><br><span class="line">  -bitmap &#x2F;home&#x2F;vermaden&#x2F;.icons&#x2F;vermaden&#x2F;xlock.xpm \</span><br><span class="line">  -count 1 \</span><br><span class="line">  -delay 10000000 \</span><br><span class="line">  -erasemode no_fade \</span><br><span class="line">  +showdate \</span><br><span class="line">  +description</span><br></pre></td></tr></table></figure></li></ul><img data-src="/2020/11/28/FreeBSD-Desktop/xlock-user-pass.png" class="" title="FreeBSD"><ul><li><p>The <code>xautolock</code> will be used to automatically lock the screen (invoke mate-screensaver or xlock command) after defined period of inactivity time.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">xautolock \</span><br><span class="line">    -time 1 \</span><br><span class="line">    -locker \</span><br><span class="line">    ~/bin/example-lock-handler.sh \</span><br><span class="line">    -resetsaver</span><br></pre></td></tr></table></figure><p>The xautolock also has to be started and run in the background using the <code>~/.xinitrc</code> or <code>~/.xsession</code> file.</p></li></ul><h5 id="Blue-Light-Spectrum-Suppress"><a href="#Blue-Light-Spectrum-Suppress" class="headerlink" title="Blue Light Spectrum Suppress"></a>Blue Light Spectrum Suppress</h5><p>Automatically adjusts color temperature of the screen according to your current time in your location.</p><ul><li><p>While <span class="exturl" data-url="aHR0cHM6Ly9qdXN0Z2V0Zmx1eC5jb20v">F.lux<i class="fa fa-external-link-alt"></i></span>  (closed source) does not provide a native binary for FreeBSD it does offer such binary for Linux and as FreeBSD provides Linux Binary Compatibility its possible to use it on FreeBSD. To use F.lux just start it in the <code>~/.xinitrc</code> or <code>~/.xsession</code> file like that.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/path/to/bin/xflux -l 33.54321 -g 11.12345 &amp;</span><br></pre></td></tr></table></figure><p>Of course 33.54321 is latitude and 11.12345 is longitude of your localization.</p></li><li><p><code>Redshift</code> is the solution that I propose to use as open source blue light spectrum suppressor. Similarly like with the F.lux to start Redshift just put it in the <code>~/.xinitrc</code> or <code>~/.xsession</code> file like that.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redshift -l 33.54321:11.12345 -g 0.9 &amp;</span><br></pre></td></tr></table></figure></li><li><p>Someone else suggested trying <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtaXIvc2N0ZA==">sctd<i class="fa fa-external-link-alt"></i></span> which is sct but rewritten/modified to be a daemon that will automatically change the color temperature during the day (or night). The sctd uses smaller about of RAM memory, uses less libraries and size of these libraries is smaller then what redshfit needs. </p></li></ul><h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h3><h5 id="Openbox"><a href="#Openbox" class="headerlink" title="Openbox"></a>Openbox</h5><ul><li><p><code>doas</code> (sudo equivalent) </p></li><li><p>Font: Download them and extract them like that into the <code>~/.fonts</code> directory, if if does not exists, create it. To make sure that Openbox will see them you can verify it using the <code>fc-match</code> command like below.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fc-match &#x27;Ubuntu Mono&#x27;</span><br><span class="line">ubuntu-mono-regular.ttf: &quot;Ubuntu Mono&quot; &quot;Regular&quot;</span><br></pre></td></tr></table></figure></li><li><p>Openbox: Openbox consists mostly of two files. <code>~/.config/openbox/menu.xml</code> and <code>~/.config/openbox/rc.xml</code>. The icons for the Openbox menu are kept under <code>~/.config/openbox/icons</code> directory.</p></li><li><p>Openbox Theme:  Unpack file like that into the <code>~/.themes</code> directory, create it if it does not exists.</p></li></ul><h3 id="参见"><a href="#参见" class="headerlink" title="参见"></a>参见</h3><p><span class="exturl" data-url="aHR0cHM6Ly92ZXJtYWRlbi53b3JkcHJlc3MuY29tL2ZyZWVic2QtZGVza3RvcC8=">FreeBSD Desktop | 𝚟𝚎𝚛𝚖𝚊𝚍𝚎𝚗 (wordpress.com)<i class="fa fa-external-link-alt"></i></span></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;The FreeBSD Desktop series are about creating efficient desktop environment on the FreeBSD system.&lt;/p&gt;</summary>
    
    
    
    
    <category term="Unix" scheme="https://vanehsiung.netlify.app/tags/Unix/"/>
    
  </entry>
  
  <entry>
    <title>Microservices</title>
    <link href="https://vanehsiung.netlify.app/2020/11/26/Microservices/"/>
    <id>https://vanehsiung.netlify.app/2020/11/26/Microservices/</id>
    <published>2020-11-26T06:17:19.000Z</published>
    <updated>2020-12-11T13:13:55.278Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>定义：“微服务架构”这个术语描述这样一种特定的软件设计方法，即以若干组可独立部署的服务的方式进行软件应用系统的设计。</p><a id="more"></a><h3 id="单体应用"><a href="#单体应用" class="headerlink" title="单体应用"></a>单体应用</h3><p>一个单体应用系统（即服务端应用系统，一个单个可执行的逻辑程序）是以一个单个单元的方式来构建的。处理用户请求的所有逻辑都运行在一个单个的进程内。通过精心设计，就能在开发人员的笔记本电脑上运行和测试这样的应用系统，并且使用一个部署流水线来确保变更被很好地进行了测试，然后部署到生产环境中。但是渐渐地，特别是随着越来越多的应用系统正被部署到云端，软件变更受到了很大的限制，应用系统的一个很小的部分的一处变更，也需要将整个单体应用系统进行重新构建和部署。这导致了微服务架构风格的诞生：以构建一组小型服务的方式来构建应用系统。</p><h5 id="单体应用架构"><a href="#单体应用架构" class="headerlink" title="单体应用架构"></a>单体应用架构</h5><p>一个单体应用，往往将应用所有功能都打包在一起：</p><p>当用户访问量变大导致一台服务器无法支撑时，就加服务器加负载均衡：</p><p>之后把静态文件独立出来，通过 CDN 等进行加速，提升单体应用的整体响应：</p><h3 id="微服务"><a href="#微服务" class="headerlink" title="微服务"></a>微服务</h3><p>微服务架构风格这种开发方法，是以开发一组小型服务的方式来开发一个独立的应用系统的。其中每个小型服务都运行在自己的进程中，并经常采用HTTP资源API这样轻量的机制来相互通信。这些服务围绕业务功能进行构建，并能通过全自动的部署机制来进行独立部署。这些微服务可以使用不同的语言来编写，并且可以使用不同的数据存储技术。对这些微服务我们仅做最低限度的集中管理。</p><h5 id="微服务架构"><a href="#微服务架构" class="headerlink" title="微服务架构"></a>微服务架构</h5><p>微服务架构，核心是为了解决应用微服务之后的服务治理问题。</p><p>第一个问题就是服务发现问题，解决方法是服务注册中心：</p><p>第二个问题是服务配置管理的问题，解决方案是配置中心：</p><p>以上是应用内部的服务治理，当客户端或外部应用调用服务的时候就需要使用到服务网关提供统一的服务入口，最终形成典型微服务架构：</p><h3 id="微服务架构的九大特性"><a href="#微服务架构的九大特性" class="headerlink" title="微服务架构的九大特性"></a>微服务架构的九大特性</h3><p>不存在微服务架构风格的正式定义。但是可以描述所见到的能够被贴上微服务标签的那些架构的共性。</p><h5 id="特性一：“组件化”与“多服务”"><a href="#特性一：“组件化”与“多服务”" class="headerlink" title="特性一：“组件化”与“多服务”"></a>特性一：“组件化”与“多服务”</h5><p>微服务架构也会使用软件库，但其将自身软件进行组件化的主要方法是将软件分解为诸多服务。</p><ul><li>组件定义：一个组件就是一个可以独立更换和升级的软件单元。</li><li>软件库定义：它能被链接到一段程序，且能通过内存中的函数来进行调用。是进程内的组件。</li><li>服务：是进程外的组件，它们通过诸如web service请求或远程过程调用这样的机制来进行通信。</li></ul><p>以使用服务（而不是以软件库）的方式来实现组件化的原因是：</p><ul><li>服务可被独立部署。如果一个应用系统由在单个进程中的多个软件库所组成，那么对任一组件做一处修改，都不得不重新部署整个应用系统。但是如果该应用系统被分解为多个服务，那么对于一个服务的多处修改，仅需要重新部署这一个服务。</li><li>能获得更加显式的组件接口。通过使用显式的远程调用机制，服务能更容易地避免客户端破坏组件的封装，从而导致组件间出现过度紧密的耦合。</li></ul><p>不足：</p><ul><li>比起进程内调用，远程调用更加昂贵。</li><li>如果需要修改组件间的职责分配，那么当跨越进程边界时，这种组件行为的改动会更加难以实现。</li></ul><h5 id="特性二：围绕“业务功能”组织团队"><a href="#特性二：围绕“业务功能”组织团队" class="headerlink" title="特性二：围绕“业务功能”组织团队"></a>特性二：围绕“业务功能”组织团队</h5><p>康威定律：</p><blockquote><p>任何设计（广义上的）系统的组织，都会产生这样一个设计，即该设计的结构与该组织的沟通结构相一致。</p><footer><strong>Melvyn Conway</strong></footer></blockquote><p>当在寻求将一个大型应用系统分解成几部分时，公司管理层往往会聚焦在技术层面上。这会导致组建用户界面团队、服务器端团队和数据库团队。</p><p>当团队沿着这些技术线分开后，即使要实现软件一个简单的变更，也会导致跨团队的项目时延和预算审批。在这种情况下，聪明的团队会进行局部优化，直接把代码逻辑塞到他们能访问到的任意应用系统中。</p><p>微服务根据业务功能来将系统分解为若干服务。这些服务针对该业务领域提供多层次广泛的软件实现，包括用户界面、持久性存储以及任何对外的协作性操作。因此，团队是跨职能的。</p><h5 id="特性三：“做产品”而不是“做项目”"><a href="#特性三：“做产品”而不是“做项目”" class="headerlink" title="特性三：“做产品”而不是“做项目”"></a>特性三：“做产品”而不是“做项目”</h5><p>项目模型：目标是交付某一块软件。一旦完工后，软件就被移交给维护团队，构建该软件的项目团队就会被解散。</p><p>微服务模型（产品理念）：一个团队在一个产品的整个生命周期中都应该保持对其拥有。这会使开发人员每天都会关注软件是如何在生产环境下运行的，并且增进他们与用户的联系，因为他们必须承担某些支持工作。</p><h5 id="特性四：“智能端点”与“傻瓜管道”"><a href="#特性四：“智能端点”与“傻瓜管道”" class="headerlink" title="特性四：“智能端点”与“傻瓜管道”"></a>特性四：“智能端点”与“傻瓜管道”</h5><p>当在不同的进程之间构建各种通信结构时，许多产品和方法强调将大量的智能特性纳入通信机制本身。</p><p>微服务社区主张智能端点和傻瓜管道。使用微服务所构建的各个应用的目标，都是尽可能地实现“高内聚和低耦合”——他们拥有自己的领域逻辑，并且更多地是像经典Unix的“过滤器”那样来工作。这些应用通过使用一些简单的REST风格的协议来进行编制，而不去使用复杂的协议。</p><p>微服务最常用的两种协议是：带有资源API的HTTP“请求－响应”协议，和轻量级的消息发送协议。对于前一种协议的最佳表述是：</p><blockquote><p>Be of the web, not behind the web</p><footer><strong>Ian Robinson</strong></footer></blockquote><h5 id="特性五：“去中心化”地治理技术"><a href="#特性五：“去中心化”地治理技术" class="headerlink" title="特性五：“去中心化”地治理技术"></a>特性五：“去中心化”地治理技术</h5><p>使用中心化的方式来对开发进行治理，其中一个后果，就是趋向于在单一技术平台上制定标准。我们更喜欢根据工作的不同来选用合理的工具。</p><h5 id="特性六：“去中心化”地管理数据"><a href="#特性六：“去中心化”地管理数据" class="headerlink" title="特性六：“去中心化”地管理数据"></a>特性六：“去中心化”地管理数据</h5><p>去中心化地管理数据，其表现形式多种多样。从最抽象的层面看，这意味着各个系统对客观世界所构建的概念模型，将彼此各不相同。微服务趋向使用“实战检验”的标准而非“强制执行”的标准。</p><p>如同在概念模型上进行去中心化的决策一样，微服务也在数据存储上进行去中心化的决策。单体应用在逻辑上各自使用一个单独的数据库来持久化数据，但是各家企业往往喜欢一系列单体应用共用一个单独的数据库。微服务更喜欢让每一个服务来管理其自有数据库。这种方法被称作“多语种持久化”。</p><h5 id="特性七：“基础设施”自动化"><a href="#特性七：“基础设施”自动化" class="headerlink" title="特性七：“基础设施”自动化"></a>特性七：“基础设施”自动化</h5><p>基础设施自动化技术已经得到长足的发展。云的演进，特别是AWS的发展，已经降低了构建、部署和运维微服务的操作复杂性。</p><p>构建流水线：</p><p>部署在单块系统和微服务上没什么区别。然而，两者在运维领域的情况却截然不同：</p><h5 id="特性八：“容错”设计"><a href="#特性八：“容错”设计" class="headerlink" title="特性八：“容错”设计"></a>特性八：“容错”设计</h5><p>使用各个微服务来替代组件，其结果是各个应用程序需要设计成能够容忍这些服务所出现的故障。</p><p>因为各个服务可以在任何时候发生故障，所以两件事就变得很重要，即能够快速地检测出故障，且在可能的情况下能够自动恢复服务。</p><h5 id="特性九：“演进式”设计"><a href="#特性九：“演进式”设计" class="headerlink" title="特性九：“演进式”设计"></a>特性九：“演进式”设计</h5><p>微服务的从业者们将服务的分解，视作一个额外的工具，来让应用开发人员能够控制应用系统中的变化，而无须减少变化的发生。</p><p>要将软件系统分解为各个组件时，决定切分应用系统时应该遵循的原则是：一个组件的关键属性，是具有独立更换和升级的特点。</p><p>这种强调可更换性的特点，是模块化设计一般性原则的一个特例，通过“变化模式”来驱动进行模块化的实现。将那些同时发生变化的东西，放到同一个模块中；很少发生变化的部分，放到不同的服务中。如果发现需要同时反复变更两个服务，这就是它们需要被合并信号。</p><h3 id="微服务框架"><a href="#微服务框架" class="headerlink" title="微服务框架"></a>微服务框架</h3><ul><li>Spring Cloud</li></ul><ul><li>Dubbo</li></ul><h3 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h3><p><span class="exturl" data-url="aHR0cHM6Ly9tYXJ0aW5mb3dsZXIuY29tL2FydGljbGVzL21pY3Jvc2VydmljZXMuaHRtbA==">Microservices<i class="fa fa-external-link-alt"></i></span></p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuamlhbnNodS5jb20vcC83MjkzYjE0ODAyOGY=">微服务入门这一篇就够了<i class="fa fa-external-link-alt"></i></span></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;定义：“微服务架构”这个术语描述这样一种特定的软件设计方法，即以若干组可独立部署的服务的方式进行软件应用系统的设计。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Architecture" scheme="https://vanehsiung.netlify.app/tags/Architecture/"/>
    
  </entry>
  
  <entry>
    <title>Linux Deploy</title>
    <link href="https://vanehsiung.netlify.app/2020/11/24/Linux-Deploy/"/>
    <id>https://vanehsiung.netlify.app/2020/11/24/Linux-Deploy/</id>
    <published>2020-11-24T07:44:19.000Z</published>
    <updated>2020-12-11T13:13:55.278Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p>这是一篇旧文章，做个记录。</p><a id="more"></a><h3 id="通过-Linux-Deploy-在-Android-上安装-Linux"><a href="#通过-Linux-Deploy-在-Android-上安装-Linux" class="headerlink" title="通过 Linux Deploy 在 Android 上安装 Linux"></a>通过 Linux Deploy 在 Android 上安装 Linux</h3><h5 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h5><p>一个 Root 了的 Android 手机</p><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuYnVzeWJveC5uZXQv">Busy Box<i class="fa fa-external-link-alt"></i></span>：Linux Deploy 支撑软件。</p><p><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL21lZWZpay9saW51eGRlcGxveS9yZWxlYXNlcw==">Linux deploy<i class="fa fa-external-link-alt"></i></span>：Linux 系统支撑软件。</p><h5 id="安装-Busy-Box"><a href="#安装-Busy-Box" class="headerlink" title="安装 Busy Box"></a>安装 Busy Box</h5><p>点击安装，等待程序自行运行，在界面中输出 <code>## END</code> 后退出程序。</p><h5 id="Linux-deploy"><a href="#Linux-deploy" class="headerlink" title="Linux deploy"></a>Linux deploy</h5><ul><li>点击左图左上角部分，选择 <strong>设置</strong>，在设置界面中找到PATH变量，赋予其值 <code>/system/xbin</code>。</li><li>建议开启 <strong>锁定Wifi</strong> 功能。</li><li>接着退回主界面，点击右下角部分。</li><li><strong>发行版</strong> 看个人喜好选择，Debian 系（Debian，Kaili，Ubuntu）较热门。</li><li><strong>架构</strong> 默认。</li><li><strong>源</strong> 默认。如果下的慢的话，就仿照默认的源换为国内的源，如 <span class="exturl" data-url="aHR0cDovL21pcnJvcnMudXN0Yy5lZHUuY24v">USTC MIRRORS<i class="fa fa-external-link-alt"></i></span>，但是不要特意去换源，官方的源用的了的话官方的源最好。</li><li><strong>安装路径</strong> ：安装在手机自带的存储空间中，则在路径开头加上<code>$&#123;ENV_DIR&#125;</code>；安装在 <strong>sdcard</strong> 中，加上<code>$&#123;EXTERNAL_STORAGE&#125;</code>。</li><li><strong>文件系统</strong> ：推荐 <code>ext4</code>。</li><li><strong>用户名</strong> 和 <strong>密码</strong> 自定义。</li><li><strong>DNS</strong> 默认。</li><li><strong>本地化</strong> ：简体中文可以选择 <code>zh_CN.UTF-8</code>，建议选择 <code>en_US.UTF-8</code> 。</li><li><strong>挂载列表</strong>：添加访问手机内容的目录，<strong>手机目录：挂载点</strong>，如 <code>/sdcard:/mnt</code>，之后会自动挂载。</li><li>**开启<code>SSH</code>**。</li><li><strong>图形界面功能</strong>，需要的话就选 <code>XFce</code> 为桌面，XFce`是轻量级桌面环境。</li><li>退出系统设置界面，点击主界面右上角，选择安装。<br>  等待程序自行安装Linux系统，开始时会自动创造一个4G左右大小的img文件，这个是默认的大小，你可以根据你手机的容量自定义，创造文件需要一点时间，屏幕会很安静，再然后会安装各种东西，屏幕会输出很多信息，根据你的源的速度，等待时间不等，看到 <code>&lt;&lt;&lt;deploy</code> 则安装完毕。如果中间没有 <code>failed</code> 则安装成功。安装失败的话就需要重新安装，换个快一点的网，或者好一点的源。</li><li> <strong>注意：安装完毕后要先点击停止按钮，再按启动按钮</strong>。这个很重要，不然你就得重装了。</li></ul><h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ul><li><p>Andorid 端用 <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Nvbm5lY3Rib3QvY29ubmVjdGJvdC9yZWxlYXNlcw==">ConnectBox<i class="fa fa-external-link-alt"></i></span></p></li><li><p>Windows用  <span class="exturl" data-url="aHR0cHM6Ly93d3cuY2hpYXJrLmdyZWVuZW5kLm9yZy51ay9+c2d0YXRoYW0vcHV0dHkvbGF0ZXN0Lmh0bWw=">putty<i class="fa fa-external-link-alt"></i></span> ，图形界面用 <span class="exturl" data-url="aHR0cHM6Ly93d3cucmVhbHZuYy5jb20vZW4vY29ubmVjdC9kb3dubG9hZC92aWV3ZXIv">VNC Viewer<i class="fa fa-external-link-alt"></i></span>。VNC Viewer 直接搜主机IP就行，VNC Server 在你选择安装图形界面功能时就自动安装了，不需要再安装 vnc4server。</p></li><li><p>Linux 输入<code>ssh username@hostname</code>就行。</p></li></ul><h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul><li><p>安装后如果用 vnc viewer 只有一个点的话，可以换一个发行版，我尝试的 CentOS 有这个问题。</p></li><li><p>Linux连的时候出现 <code>WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!</code>：</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -R + 输入服务器的IP</span><br></pre></td></tr></table></figure></li><li><p>altarch 架构的手机 CentOS 系统换源</p>   <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cp CentOS-7-armhfp.repo CentOS-Base.repo</span><br><span class="line">mv CentOS-7-armhfp.repo CentOS-7-armhfp.repo.backup</span><br><span class="line">vi CentOS-Base.repo</span><br><span class="line">baseurl=https://mirrors.ustc.edu.cn/centos-altarch/7.6.1810/os/armhfp/</span><br><span class="line">yum makecache</span><br><span class="line">yum update</span><br></pre></td></tr></table></figure></li><li><p><strong>如果你之前没有安装VNC的话，现在又想装：</strong></p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install tigervnc-server</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;这是一篇旧文章，做个记录。&lt;/p&gt;</summary>
    
    
    
    
    <category term="Unix" scheme="https://vanehsiung.netlify.app/tags/Unix/"/>
    
  </entry>
  
  <entry>
    <title>Conversation</title>
    <link href="https://vanehsiung.netlify.app/2020/11/21/Conversation/"/>
    <id>https://vanehsiung.netlify.app/2020/11/21/Conversation/</id>
    <published>2020-11-21T10:37:12.000Z</published>
    <updated>2020-12-11T13:13:55.274Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><img data-src="/2020/11/21/Conversation/The%20Silent%20League.jpg" class="" title="The Silent League"><blockquote class="blockquote-center"><p>Just a little conversation<br>About give me your picture<br>On the cover of a magazine<br>On the cover of a magazine<br>Just a little conversation<br>But how long it might take one?<br>To get along with such thing?<br>To get along with such thing?<br>But everybody knows<br>It’s easier to fall apart<br>Just a little conversation<br>About give me your picture<br>On the cover of a magazine<br>On the cover of a magazine</p></blockquote><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=298 height=52 src="//music.163.com/outchain/player?type=2&id=3716423&auto=0&height=32"></iframe>]]></content>
    
    
      
      
    <summary type="html">&lt;link rel=&quot;stylesheet&quot; class=&quot;aplayer-secondary-style-marker&quot; href=&quot;/assets/css/APlayer.min.css&quot;&gt;&lt;script src=&quot;/assets/js/APlayer.min.js&quot; cla</summary>
      
    
    
    
    
    <category term="Lyrics" scheme="https://vanehsiung.netlify.app/tags/Lyrics/"/>
    
  </entry>
  
  <entry>
    <title>FreeBSD</title>
    <link href="https://vanehsiung.netlify.app/2020/11/17/FreeBSD/"/>
    <id>https://vanehsiung.netlify.app/2020/11/17/FreeBSD/</id>
    <published>2020-11-17T11:55:35.000Z</published>
    <updated>2020-12-11T13:13:55.278Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote><p>FreeBSD 計劃的目標在於提供可作任意用途的軟體而不附帶任何限制條文。 我們之中許多人對程式碼 (以及計畫本身) 都有非常大的投入， 因此，當然不介意偶爾有一些資金上的補償，但我們並沒打算堅決地要求得到這類資助。 我們認為我們的首要“使命”是為任何人提供程式碼， 不管他們打算用這些程式碼做什麼， 因為這樣程式碼將能夠被更廣泛地使用，從而發揮其價值。 我認為這是自由軟體最基本的，同時也是我們所倡導的一個目標。</p><p>我們程式碼樹中，有若干是以 GNU 通用公共授權條款 (GPL) 或者 GNU 較寬鬆通用公共授權條款 (LGPL) 發佈的那些程式碼帶有少許的附加限制，還好只是強制性的要求開放程式碼而不是別的。 由於使用 GPL 的軟體在商業用途上會增加若干複雜性，因此，如果可以選擇的話， 我們會比較喜歡使用限制相對更寬鬆的 BSD 版權來發佈軟體。</p><footer><strong>Jordan Hubbard</strong><cite><span class="exturl" data-url="aHR0cHM6Ly93d3cuZnJlZWJzZC5vcmcvZG9jL3poX1RXL2Jvb2tzL2hhbmRib29rLw==">FreeBSD Handbook<i class="fa fa-external-link-alt"></i></span></cite></footer></blockquote><a id="more"></a><h3 id="Xorg-Configuration"><a href="#Xorg-Configuration" class="headerlink" title="Xorg Configuration"></a>Xorg Configuration</h3><p>顯示卡、顯示器以及輸入裝置會自動偵測，無須任何手動設置。除非自動設置失敗，否則請勿建立 xorg.conf 或執行 -configure 步驟。</p><p>加入要執行 Xorg 的使用者到 <code>video</code> 或 <code>wheel</code> 群組，以便在可用時能開啟 3D 加速。要加入使用者 <em><code>jru</code></em> 到任一個可用的群組：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pw groupmod video -m jru || pw groupmod wheel -m jru</span><br></pre></td></tr></table></figure><p>較舊版的 FreeBSD 使用的 sc 並不知到 KMS 系統的存在，這會導致關閉 X 之後即始仍在運作但系統 Console 卻呈現空白。較新版的 vt Console 可避免這個問題。</p><p>加入此行到 <code>/boot/loader.conf</code> 來開啟 vt：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kern.vty&#x3D;vt</span><br></pre></td></tr></table></figure><p>使用多檔，每一個檔案只設定一個指定項目會較傳統使用單一 <code>/etc/X11/xorg.conf</code> 設定來的簡單。完整路徑為 <code>/usr/local/etc/X11/xorg.conf.d/</code>。</p><h5 id="在檔案中設定影像驅動程式"><a href="#在檔案中設定影像驅動程式" class="headerlink" title="在檔案中設定影像驅動程式"></a>在檔案中設定影像驅動程式</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/etc/X11/xorg.conf.d/driver-intel.conf</span><br><span class="line">Section &quot;Device&quot;</span><br><span class="line">Identifier &quot;Card0&quot;</span><br><span class="line">Driver     &quot;intel&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash"> BusID    <span class="string">&quot;PCI:1:0:0&quot;</span></span></span><br><span class="line">EndSection</span><br></pre></td></tr></table></figure><p>若有多張顯示卡，可取消註解 <code>BusID</code> identifier 然後設定為想要的顯示卡，顯示卡的 Bus ID 清單可以使用 <code>pciconf -lv | grep -B3 display</code> 取得。</p><h5 id="手動設定"><a href="#手動設定" class="headerlink" title="手動設定"></a>手動設定</h5><p>設定檔可由 Xorg 根據偵測到的硬體產生，這個檔案對一開始自訂設定很有幫助。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Xorg -configure</span><br></pre></td></tr></table></figure><p>設定檔會儲存至 <code>/root/xorg.conf.new</code>，做任何需要的更改，然後使用以下指令測試該檔案：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Xorg -config /root/xorg.conf.new</span><br></pre></td></tr></table></figure><p>在新設定檔調整與測試過後，便可分開成較小的檔案放置到正常的位置 <code>/usr/local/etc/X11/xorg.conf.d/</code>。</p><h3 id="Install-Desktop-Enviroment"><a href="#Install-Desktop-Enviroment" class="headerlink" title="Install Desktop Enviroment"></a>Install Desktop Enviroment</h3><ul><li><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuZ2hvc3Ric2Qub3JnLw==">GhostBSD<i class="fa fa-external-link-alt"></i></span> 是 FreeBSD 桌面发行版，注意使用 Official 版本，不能直接使用 FreeBSD 源升级。</p></li><li><p><span class="exturl" data-url="aHR0cHM6Ly9ub21hZGJzZC5vcmcv">nomadbsd<i class="fa fa-external-link-alt"></i></span> 是个非常漂亮的 FreeBSD 桌面发行版 ，德国产。</p></li><li><p>可以在虚拟机里面安装 FreeBSD 桌面发行版，然后找到自己想用的桌面工具，再定制自己的 FreeBSD 桌面。</p></li></ul><p>X 最初設計是以網路為中心，採用 “client-server” 架構。在此架構下 “X 伺服器” 在有鍵盤、螢幕、滑鼠的電腦上運作。該伺服器負責的工作包含管理顯示、處理來自鍵盤、滑鼠的輸入及來自其他設備)的輸入或輸出。</p><p>每個 X 應用程式，如 XTerm、Firefox 都是 “客戶端”。</p><p>視窗管理程式規定螢幕上的視窗該長什麼樣、要如何移動滑鼠指標、 要用什麼鍵來在視窗切換、每個視窗的標題列長相，及是否該有關閉按鈕，等等。視窗管理程式負責滑鼠指標的聚焦政策。 聚焦政策指的是如何決定使用中及接收鍵盤輸入的視窗。通常較為人熟悉的聚焦政策叫做 “click-to-focus”，這個模式中，滑鼠點選到的視窗便會處於作用中 (Active) 的狀態。</p><p>KDE 與 GNOME 會被稱作桌面環境是因為包含了完整常用桌面作業的應用程式。</p><ul><li><p>Install X Window System</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg install xorg</span><br></pre></td></tr></table></figure></li><li><p>Install Desktop Environment</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg install gnome3</span><br><span class="line">sudo pkg install gnome3-lite</span><br><span class="line">sudo pkg install x11/kde5</span><br><span class="line">sudo pkg install xfce</span><br><span class="line">sudo pkg install mate</span><br></pre></td></tr></table></figure></li><li><p>Install/Enable Display Manager</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg install xdm</span><br><span class="line">sudo pkg install slim# xfce,mate</span><br><span class="line">sudo pkg install x11/sddm# kde</span><br></pre></td></tr></table></figure></li><li><p>Setting</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/ttys</span><br><span class="line">ttyv8   &quot;/usr/local/bin/xdm -nodaemon&quot;  xterm  on secure</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/fstab gnome, kde</span><br><span class="line">proc           /proc       procfs  rw  0   0</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/rc.conf</span><br><span class="line">moused_enalbe=&quot;YES&quot;</span><br><span class="line">dbus_enable=&quot;YES&quot;# gnome, kde, xfce</span><br><span class="line">hald_enable=&quot;YES&quot;# gnome, kde, mate</span><br><span class="line">gdm_enalbe=&quot;YES&quot;# gnome启动</span><br><span class="line">sddm_enable=&quot;YES&quot;# kde启动</span><br><span class="line">slim_enable=&quot;YES&quot;# xfce,mate</span><br><span class="line">gnome_enable=&quot;YES&quot;# gnome服务</span><br></pre></td></tr></table></figure></li></ul><ul><li><p>slim Usage:failed to execute login command</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo vi ~/.xinitrc</span><br><span class="line">exec mate-session# mate</span><br><span class="line">exec xfce4-session# xfce</span><br></pre></td></tr></table></figure></li></ul><h3 id="Binary-套件"><a href="#Binary-套件" class="headerlink" title="Binary 套件"></a>Binary 套件</h3><p>搜寻软件：<span class="exturl" data-url="aHR0cHM6Ly93d3cuZnJlZWJzZC5vcmcvcG9ydHMvaW5kZXguaHRtbA==">FreeBSD Ports<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly93d3cuZnJlc2hwb3J0cy5vcmcv">FreshPorts<i class="fa fa-external-link-alt"></i></span></p><p>因編譯選項不同，有些 Port 會有多個版本可使用。</p><ul><li><p><span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLnVzdGMuZWR1LmNuL2hlbHAvZnJlZWJzZC1wa2cuaHRtbA==">USTC Mirrors<i class="fa fa-external-link-alt"></i></span>：注意使用 Latest 源，有很多流行软件。创建 <code>/usr/local/etc/pkg/repos/FreeBSD.conf</code> 覆盖官方源 <code>/etc/pkg/FreeBSD.conf</code> 配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /usr/local/etc/pkg/repos/FreeBSD.conf</span><br><span class="line">FreeBSD: &#123;</span><br><span class="line">  url: &quot;pkg+http://mirrors.ustc.edu.cn/freebsd-pkg/$&#123;ABI&#125;/latest&quot;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sudo pkg update -f# 更新索引</span><br></pre></td></tr></table></figure></li><li><p><span class="exturl" data-url="aHR0cDovL21pcnJvcnMuMTYzLmNvbS9mcmVlYnNkLXBrZy9GcmVlQlNEJTNhMTIlM2FhbWQ2NC9sYXRlc3Qv">163 Mirrors<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url: &quot;pkg+http:&#x2F;&#x2F;mirrors.163.com&#x2F;freebsd-pkg&#x2F;$&#123;ABI&#125;&#x2F;latest&quot;,</span><br></pre></td></tr></table></figure></li><li><p>要啟動 (Bootstrap) 系統，請執行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /usr/sbin/pkg</span><br></pre></td></tr></table></figure></li><li><p>當升級原使用舊版 pkg_* 工具的既有系統時，必須將資料庫轉換成新的格式</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg2ng</span><br></pre></td></tr></table></figure></li><li><p>Update the available remote repositories as listed in pkg.conf</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg update</span><br></pre></td></tr></table></figure></li><li><p>Search for a package</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg search perl</span><br></pre></td></tr></table></figure></li><li><p>在指定要安裝的套件時，最好使用 Port 來源來指定該應用程式，Port 來源是指應用程式在 Port 樹中的路徑</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg search -o perl</span><br></pre></td></tr></table></figure></li><li><p>Install a package: Installing must specify a unique origin or version otherwise it will try installing all matches</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg install perl-5.14</span><br></pre></td></tr></table></figure></li><li><p>列出已經安裝的 Port 中有那些已過時</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg version -l &quot;&lt;&quot;</span><br></pre></td></tr></table></figure></li><li><p>Upgrade from remote repository</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg upgrade</span><br></pre></td></tr></table></figure></li><li><p>Delete an installed package</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg delete perl-5.14</span><br></pre></td></tr></table></figure></li><li><p>Remove unneeded dependencies</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg autoremove</span><br></pre></td></tr></table></figure></li><li><p>List installed packages</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg info</span><br></pre></td></tr></table></figure></li><li><p>Display information about installed packages</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg info perl-5.14</span><br></pre></td></tr></table></figure></li><li><p>Show the pkg-message of a package</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg info -D perl-5.14</span><br></pre></td></tr></table></figure></li><li><p>要查詢已安在系統上的軟體是否有任何已知的漏洞</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg audit -F</span><br></pre></td></tr></table></figure></li><li><p>因為相依所安裝的套件稱作自動 (Automatic) 套件，而非自動套件即套件被安裝的原因不是因為其他套件所相依</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg prime-list# deprecated</span><br></pre></td></tr></table></figure></li><li><p>Clean the local cache of fetched remote packages</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg clean</span><br></pre></td></tr></table></figure></li><li><p>Example</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg install vim atom linux-sublime3</span><br><span class="line">sudo pkg install git node npm# Node.js</span><br><span class="line">sudo pkg install plank telegram-desktop firefox-esr</span><br><span class="line">sudo pkg install intellij tomcat mysql180-server mysql180-client# Intellij IDEA use openjdk8</span><br><span class="line">sudo pkg install p7zip</span><br><span class="line">sudo pkg install zsh# ZSH_THEME=&quot;agnoster&quot;</span><br><span class="line">pip install NetEase-MusicBox# export PATH=&quot;your-dir:$PATH&quot;</span><br><span class="line">sudo pkg install you-get youtube_dl</span><br><span class="line">sudo pkg install vlc mplayer</span><br></pre></td></tr></table></figure></li></ul><h3 id="Port-套件"><a href="#Port-套件" class="headerlink" title="Port 套件"></a>Port 套件</h3><p>優點：</p><ul><li>可更改編譯選項</li><li>部份軟體的授權條款中禁止以 Binary 格式發佈。 這種軟體必須以原始碼發佈並由終端使用者編譯。</li><li>原始碼可套用自訂的修補。</li></ul><p>Port 中並不含實際的原始碼，在編譯 Port 解壓縮時會自動下載的原始碼到 <code>/usr/ports/distfiles</code>。</p><ul><li><p><span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLnVzdGMuZWR1LmNuL2hlbHAvZnJlZWJzZC1wb3J0cy5odG1s">USTC Mirrors<i class="fa fa-external-link-alt"></i></span>：在 <code>/etc/make.conf</code> 中添加以下内容</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MASTER_SITE_OVERRIDE?&#x3D;http:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;freebsd-ports&#x2F;distfiles&#x2F;$&#123;DIST_SUBDIR&#125;&#x2F;</span><br></pre></td></tr></table></figure></li><li><p><span class="exturl" data-url="aHR0cDovL21pcnJvcnMuMTYzLmNvbS9mcmVlYnNkLXBvcnRzL2Rpc3RmaWxlcy8=">163 Mirrors<i class="fa fa-external-link-alt"></i></span></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MASTER_SITE_OVERRIDE?&#x3D;http:&#x2F;&#x2F;mirrors.163.com&#x2F;freebsd-ports&#x2F;distfiles&#x2F;$&#123;DIST_SUBDIR&#125;&#x2F;</span><br></pre></td></tr></table></figure></li><li><p>安裝 Port 套件集：下載壓縮後的 Port 套件集快照 (Snapshot) 到 /var/db/portsnap</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo portsnap fetch</span><br></pre></td></tr></table></figure></li><li><p>第一次執行 Portsnap 時，要先解壓縮快照到 /usr/ports</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo portsnap extract</span><br></pre></td></tr></table></figure></li><li><p>執行以下指令來更新 /usr/ports</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo portsnap fetch</span><br><span class="line">sudo portsnap update</span><br></pre></td></tr></table></figure></li><li><p>要找到 Port 所在的分類</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo whereis lsof</span><br></pre></td></tr></table></figure></li><li><p>使用 Port 套件集內建的搜尋機制來找軟體</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo cd /usr/ports</span><br><span class="line">sudo make search name=lsof</span><br><span class="line">sudo make quicksearch name=lsof# 不接受多資訊</span><br></pre></td></tr></table></figure></li><li><p>若要進行更有深度的搜尋</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo make search key=string</span><br><span class="line">sudo make quicksearch key=string</span><br></pre></td></tr></table></figure></li><li><p>一次設定所有Port 編譯選項</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make config-recursive</span><br></pre></td></tr></table></figure></li><li><p>重新進入 Port 的編譯選項清單</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo make config# or</span><br><span class="line">sudo make showconfig# or</span><br><span class="line">sudo make rmconfig</span><br></pre></td></tr></table></figure></li><li><p>編譯並安裝 Port</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cd /usr/ports/sysutils/lsof</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></li><li><p>編譯在 /usr/ports Port 並安裝到 /usr/home/example/local</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make WRKDIRPREFIX=../ports PREFIX=../local install</span><br></pre></td></tr></table></figure></li><li><p>安裝過程中會建立工作用的子目錄用來儲存編譯時暫存的檔案。可移除此目錄來節省磁碟空間並漸少往後升級新版 Port 時造成問題</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo make clean</span><br></pre></td></tr></table></figure></li><li><p>移除已安裝的 Port</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo cd /usr/ports/sysutils/lsof</span><br><span class="line">sudo make deinstall</span><br></pre></td></tr></table></figure></li><li><p>Example</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/ports/java/linux-oracle-jdk18</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></li></ul><p>安裝後的注意事項：</p><ul><li>大部份應用程式安裝會在 <code>/usr/local/etc</code> 安裝至少一個預設的設定檔。</li><li>應用程式提供的文件會安裝到 <code>/usr/local/share/doc</code>。</li><li>部份應用程式會以服務的方式執行，在啟動應用程式前前需要加入設定到 <code>/etc/rc.conf</code>。這些應用程式通常會安裝啟動 Script 到 <code>/usr/local/etc/rc.d</code>。</li></ul><h3 id="Linux®-Binary-相容性"><a href="#Linux®-Binary-相容性" class="headerlink" title="Linux® Binary 相容性"></a>Linux® Binary 相容性</h3><p>FreeBSD 提供 Linux® Binary 的相容性，允許使用者在 FreeBSD 系統上不需要修改就可以安裝和執行大部份的 Linux® Binary。</p><p>最好不要直接安装 Linux 的软件，而使用 FreeBSD 源中的 Linux 软件，一般以 <code>linux-package</code> 命名。</p><ul><li><p>載入 Linux® 核心模組</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo kldload linux</span><br></pre></td></tr></table></figure></li><li><p>對 64-位元的相容性</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo kldload linux64</span><br></pre></td></tr></table></figure></li><li><p>確認模組已載入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo kldstat</span><br></pre></td></tr></table></figure></li><li><p>安裝基本的 Linux® 程式庫和 Binary</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg install emulators/linux_base-c7</span><br></pre></td></tr></table></figure></li><li><p>Add the following line</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/fstab</span><br><span class="line">linprocfs   /compat/linux/proclinprocfsrw00</span><br><span class="line">linsysfs    /compat/linux/syslinsysfsrw00</span><br><span class="line">tmpfs    /compat/linux/dev/shmtmpfsrw,mode=177700</span><br></pre></td></tr></table></figure></li><li><p>開機時開啟 Linux® 相容性</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/rc.conf</span><br><span class="line">linux_enable=&quot;YES&quot;</span><br></pre></td></tr></table></figure></li><li><p>安裝 Linux® ELF Binary</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo brandelf -t Linux my-linux-elf-binary</span><br></pre></td></tr></table></figure></li><li><p>安裝以 Linux® RPM 為基礎的應用程式,需先安裝 archivers/rpm4 套件或 Port</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg install rpm4</span><br><span class="line">sudo cd /compat/linux</span><br><span class="line">sudo rpm2cpio &lt; /path/to/linux.archive.rpm | cpio -id</span><br></pre></td></tr></table></figure></li></ul><h5 id="手動安裝其他程式庫"><a href="#手動安裝其他程式庫" class="headerlink" title="手動安裝其他程式庫"></a>手動安裝其他程式庫</h5><ul><li><p>在 Linux® 系統，可使用 ldd 來找出應用程式需要哪個共用程式庫</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ldd linuxdoom</span><br><span class="line">libXt.so.3 (DLL Jump 3.1) =&gt; /usr/X11/lib/libXt.so.3.1.0</span><br></pre></td></tr></table></figure></li><li><p>複製 Linux® 系統輸出結果中最後一欄需要的的檔案到 FreeBSD 系統的 /compat/linux。 複製完後，建立符號連結 (Symbolic link) 至輸出結果第一欄的名稱</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;compat&#x2F;linux&#x2F;usr&#x2F;X11&#x2F;lib&#x2F;libXt.so.3.1.0</span><br><span class="line">&#x2F;compat&#x2F;linux&#x2F;usr&#x2F;X11&#x2F;lib&#x2F;libXt.so.3 -&gt; libXt.so.3.1.0</span><br></pre></td></tr></table></figure></li></ul><h3 id="自訂核心"><a href="#自訂核心" class="headerlink" title="自訂核心"></a>自訂核心</h3><h5 id="為何要編譯自訂的核心"><a href="#為何要編譯自訂的核心" class="headerlink" title="為何要編譯自訂的核心?"></a>為何要編譯自訂的核心?</h5><p> 自訂核心有許多項優點，如：</p><ul><li>加速開機，因為自訂的核心只需要偵測您系統上存在的硬體，所以讓啟動所花的過程更流暢快速。</li><li>減少記憶體使用，自訂的核心通常會比 <code>GENERIC</code> 核心使用更少的記憶體，這很重要，因為核心必須一直存放在實體記憶體內。</li><li>支援額外的硬體，自訂的核心可以增加一些 <code>GENERIC</code> 核心沒有提供的硬體支援。</li></ul><h5 id="偵測系統硬體"><a href="#偵測系統硬體" class="headerlink" title="偵測系統硬體"></a>偵測系統硬體</h5><ul><li><p> <code>dmesg</code>  or <code>/var/run/dmesg.boot</code> </p></li><li><p><code>pciconf -lv</code></p></li><li><p>在 man指令加上 -k 旗標可列出有包含指定裝置品牌或名稱的手冊頁面清單：<code>man -k Intel</code></p></li></ul><h5 id="設定檔"><a href="#設定檔" class="headerlink" title="設定檔"></a>設定檔</h5><p><code>/usr/src/sys</code> 下子目錄代表著支援的硬體架構 (Architecture)，每個支援的硬體架構中會有 <code>conf</code> 子目錄，裡面含有供該架構使用的 <code>GENERIC</code> 核心設定檔。</p><p>說明在<code>GENERIC</code> 同目錄的 <code>NOTES</code> 檔案中。所有架構通用選項，參考 <code>/usr/src/sys/conf/NOTES</code>。</p><h3 id="Others"><a href="#Others" class="headerlink" title="Others"></a>Others</h3><h5 id="Screen-resolution-on-FreeBSD-on-VirtualBox"><a href="#Screen-resolution-on-FreeBSD-on-VirtualBox" class="headerlink" title="Screen resolution on FreeBSD on VirtualBox"></a>Screen resolution on FreeBSD on VirtualBox</h5><p>问题描述：在virtualbox虚拟机下，无法改变桌面分辨率为1366x768</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VBoxManage setextradata &quot;FreeBSD&quot; VBoxInternal2/EfiGraphicsResolution 1366x768</span><br></pre></td></tr></table></figure><h5 id="Disable-the-Forward-Back-buttons-on-my-mouse"><a href="#Disable-the-Forward-Back-buttons-on-my-mouse" class="headerlink" title="Disable the Forward/Back buttons on my mouse"></a>Disable the Forward/Back buttons on my mouse</h5><p>问题描述：浏览网页时，鼠标滑轮滚动浏览器就会前进后退。</p><p><span class="exturl" data-url="aHR0cHM6Ly91bml4LnN0YWNrZXhjaGFuZ2UuY29tL3F1ZXN0aW9ucy8yMDU1MC9ob3ctdG8tZGlzYWJsZS10aGUtZm9yd2FyZC1iYWNrLWJ1dHRvbnMtb24tbXktbW91c2U=">Salved<i class="fa fa-external-link-alt"></i></span>：</p><ul><li><p>执行下面命令后，上下滑动鼠标滑轮，看看映射到那些button，一般是buttons 8 and 9</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo xev | grep -A2 ButtonPress</span><br></pre></td></tr></table></figure></li><li><p>then disable button 8 and 9（前提是有上面的问题，否则就不要禁）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo vi ~/.Xmodmap</span><br><span class="line">pointer = 1 2 3 4 5 6 7 0 0 0 0 0</span><br></pre></td></tr></table></figure></li><li><p>test it with the command,command automatically when you log in; if yours doesn’t, arrange for it to run when X starts.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo xmodmap ~/.Xmodmap</span><br></pre></td></tr></table></figure></li></ul><h5 id="Install-chinese-font"><a href="#Install-chinese-font" class="headerlink" title="Install chinese font"></a>Install chinese font</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg install zh-CJKUnifonts# CJK（中日韩统一表意文字）</span><br></pre></td></tr></table></figure><h5 id="设单使用模式为不安全"><a href="#设单使用模式为不安全" class="headerlink" title="设单使用模式为不安全"></a>设单使用模式为不安全</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/ttys</span><br><span class="line">console noneunknown off insecure</span><br></pre></td></tr></table></figure><h5 id="No-space-left-on-device"><a href="#No-space-left-on-device" class="headerlink" title="No space left on device"></a>No space left on device</h5><p>问题描述：使用 pkg update 时提示这个问题。原因是 /tmp is too small。</p><p><span class="exturl" data-url="aHR0cHM6Ly9mb3J1bXMuZnJlZWJzZC5vcmcvdGhyZWFkcy9uby1zcGFjZS1sZWZ0LW9uLWRldmljZS42MTIzMi8=">Salved<i class="fa fa-external-link-alt"></i></span>: </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/fstab</span><br><span class="line">tmpfs/tmptmpfsrw,size=25600000000# size 以Byte为单位</span><br></pre></td></tr></table></figure><h5 id="VirtualBox™-guest-additions"><a href="#VirtualBox™-guest-additions" class="headerlink" title="VirtualBox™ guest additions"></a>VirtualBox™ guest additions</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo cd /usr/ports/emulators/virtualbox-ose-additions &amp;&amp; make install clean</span><br><span class="line"></span><br><span class="line">sudo vi /etc/rc.conf</span><br><span class="line">vboxguest_enable=&quot;YES&quot;</span><br><span class="line">vboxservice_enable=&quot;YES&quot;</span><br><span class="line">vboxservice_flags=&quot;--disable-timesync&quot;# 若有使用 ntpd或 ntpdate，便可關閉主機時間同步功能</span><br></pre></td></tr></table></figure><h5 id="Fish"><a href="#Fish" class="headerlink" title="Fish"></a>Fish</h5><p>Fish 是”the <strong>f</strong>riendly <strong>i</strong>nteractive <strong>sh</strong>ell”的简称，最大特点就是方便易用。</p><p>Fish 会自动在光标后面给出建议，表示可能的选项，颜色为灰色。如果采纳建议，可以按下<code>→</code>或<code>Control + F</code>。如果只采纳一部分，可以按下<code>Alt + →</code>。</p><p>输入命令时，Fish 会自动显示匹配的上一条历史记录。如果没有匹配的历史记录，Fish 会猜测可能的结果，自动补全各种输入。</p><h5 id="How-to-start-things-at-boot-time"><a href="#How-to-start-things-at-boot-time" class="headerlink" title="How to start things at boot time"></a><span class="exturl" data-url="aHR0cDovL3d3dy5mcmVlYnNkZGlhcnkub3JnLw==">How to start things at boot time<i class="fa fa-external-link-alt"></i></span></h5><ul><li><p>These directories are defined in <code>/etc/defaults/rc.conf</code>（主要是运行脚本）</p><ul><li><p>Default startup directory is <code>/usr/local/etc/rc.d/</code>. if you need the files to be executed in a specific order, try numbering the files. For example:</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">000This.Will.Run.First.sh</span><br><span class="line">020This.Will.Run.Next.sh</span><br><span class="line">030And.Then.This.sh</span><br></pre></td></tr></table></figure></li><li><p>deprecated: <code>/etc/rc.local</code>        </p></li></ul></li></ul><ul><li><p>: DSBAutostart is a Qt program that allows you to add commands to be executed at session start.</p><p>（本质就是在 <code>.xinitrc</code> 调用程序指令，GUI 程序开机启动都需放入 <code>.xinitrc</code>，在 Xorg 启动后运行）</p><ul><li><p>Installation</p>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /usr/ports/x11/dsbautostart &amp;&amp; make install distclean</span><br></pre></td></tr></table></figure></li><li><p>Usage</p><ul><li><p>Manual</p><ul><li><p>Setup: Add the following command to your <code>~/.xinitrc</code>, or to your window manager’s startup script (e.g. ~/.config/openbox/autostart.sh)</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sh ~&#x2F;.config&#x2F;DSB&#x2F;autostart.sh&amp;</span><br></pre></td></tr></table></figure></li><li><p><code>~/.config/DSB/autostart.sh</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plank&amp;</span><br></pre></td></tr></table></figure></li><li><p>GUI: <code>Setting -&gt; DSBAutostart -&gt; Add Command</code>, example <code>plank</code>, then <code>Save</code> and <code>Quit</code></p></li></ul></li></ul></li></ul></li></ul><h5 id="FreeBSD-Insall-Oracle-JDK"><a href="#FreeBSD-Insall-Oracle-JDK" class="headerlink" title="FreeBSD Insall Oracle JDK"></a>FreeBSD Insall Oracle JDK</h5><ul><li>安装 Linux Compact</li><li>在 <code>/usr/ports/java/linux-oracle-jdk18</code> 运行 <code>sudo make install</code></li><li>根据提示在 <span class="exturl" data-url="aHR0cHM6Ly93d3cub3JhY2xlLmNvbS9qYXZhL3RlY2hub2xvZ2llcy9vcmFjbGUtamF2YS1hcmNoaXZlLWRvd25sb2Fkcy5odG1s">Oracle Java Archive<i class="fa fa-external-link-alt"></i></span> 下载需要的 JDK 版本安装包，复制到 <code>/usr/ports/distfiles</code></li><li>在 <code>/usr/ports/java/linux-oracle-jdk18</code> 运行 <code>sudo make install</code>，安装成功</li></ul><h5 id="FreeBSD-Install-Python-and-pip"><a href="#FreeBSD-Install-Python-and-pip" class="headerlink" title="FreeBSD Install Python and pip"></a>FreeBSD Install Python and pip</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo pkg install python</span><br><span class="line"></span><br><span class="line">python --version</span><br><span class="line">Python 3.7.9</span><br><span class="line"></span><br><span class="line">sudo pkg install py37-pip</span><br></pre></td></tr></table></figure><h3 id="BSDs"><a href="#BSDs" class="headerlink" title="BSDs"></a>BSDs</h3><p>NetBSD: <span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLmh1YXdlaWNsb3VkLmNvbS9OZXRCU0Qv">huaweicloud<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLmFsaXl1bi5jb20vbmV0YnNkLz9zcG09YTJjNmguMTM2NTExMDQuMC4wLjRkODQzYmY0QXpKWVRY">aliyun<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuLw==">tsinghua<i class="fa fa-external-link-alt"></i></span></p><p>OpenBSD: <span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLmh1YXdlaWNsb3VkLmNvbS9PcGVuQlNELw==">huaweicloud<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLmFsaXl1bi5jb20vb3BlbmJzZC8/c3BtPWEyYzZoLjEzNjUxMTA0LjAuMC4xNGRiNWE1MHFGblhsNg==">aliyun<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuLw==">tsinghua<i class="fa fa-external-link-alt"></i></span></p><p>一篇好文：<span class="exturl" data-url="aHR0cHM6Ly9teS5vc2NoaW5hLm5ldC9xaWhoL2Jsb2cvNzg3NDM=">FreeBSD的现状和未来<i class="fa fa-external-link-alt"></i></span></p>]]></content>
    
    
    <summary type="html">&lt;blockquote&gt;&lt;p&gt;FreeBSD 計劃的目標在於提供可作任意用途的軟體而不附帶任何限制條文。 我們之中許多人對程式碼 (以及計畫本身) 都有非常大的投入， 因此，當然不介意偶爾有一些資金上的補償，但我們並沒打算堅決地要求得到這類資助。 我們認為我們的首要“使命”是為任何人提供程式碼， 不管他們打算用這些程式碼做什麼， 因為這樣程式碼將能夠被更廣泛地使用，從而發揮其價值。 我認為這是自由軟體最基本的，同時也是我們所倡導的一個目標。&lt;/p&gt;
&lt;p&gt;我們程式碼樹中，有若干是以 GNU 通用公共授權條款 (GPL) 或者 GNU 較寬鬆通用公共授權條款 (LGPL) 發佈的那些程式碼帶有少許的附加限制，還好只是強制性的要求開放程式碼而不是別的。 由於使用 GPL 的軟體在商業用途上會增加若干複雜性，因此，如果可以選擇的話， 我們會比較喜歡使用限制相對更寬鬆的 BSD 版權來發佈軟體。&lt;/p&gt;
&lt;footer&gt;&lt;strong&gt;Jordan Hubbard&lt;/strong&gt;&lt;cite&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly93d3cuZnJlZWJzZC5vcmcvZG9jL3poX1RXL2Jvb2tzL2hhbmRib29rLw==&quot;&gt;FreeBSD Handbook&lt;i class=&quot;fa fa-external-link-alt&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;/cite&gt;&lt;/footer&gt;&lt;/blockquote&gt;</summary>
    
    
    
    
    <category term="Unix" scheme="https://vanehsiung.netlify.app/tags/Unix/"/>
    
  </entry>
  
</feed>
